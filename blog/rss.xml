<?xml version="1.0" encoding="utf-8"?>
<rss version="2.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:content="http://purl.org/rss/1.0/modules/content/">
    <channel>
        <title>Nathaniel Vaur Henel, ton dév sensei Blog</title>
        <link>https://nathaniel-vaur-henel.github.io/blog</link>
        <description>Nathaniel Vaur Henel, ton dév sensei Blog</description>
        <lastBuildDate>Thu, 11 Apr 2024 00:00:00 GMT</lastBuildDate>
        <docs>https://validator.w3.org/feed/docs/rss2.html</docs>
        <generator>https://github.com/jpmonette/feed</generator>
        <language>fr</language>
        <copyright>Copyright © 2024 Nathaniel Vaur Henel</copyright>
        <item>
            <title><![CDATA[Mermaid, l'outil de création de diagrammes vite faits, bien faits]]></title>
            <link>https://nathaniel-vaur-henel.github.io/blog/mermaid</link>
            <guid>https://nathaniel-vaur-henel.github.io/blog/mermaid</guid>
            <pubDate>Thu, 11 Apr 2024 00:00:00 GMT</pubDate>
            <description><![CDATA[Il n'est pas toujours facile d'imaginer un visuel convaincant pour illustrer sa pensée. Pour ceux qui n'ont aucune notion de graphisme, ou qui ne veulent pas perdre de temps à utiliser un logiciel spécifique, il existe un outil simple à utiliser : Mermaid.]]></description>
            <content:encoded><![CDATA[<p>Il n'est pas toujours facile d'imaginer un visuel convaincant pour illustrer sa pensée. Pour ceux qui n'ont aucune notion de graphisme, ou qui ne veulent pas perdre de temps à utiliser un logiciel spécifique, il existe un outil simple à utiliser&nbsp;: <a href="https://mermaid.js.org/" target="_blank" rel="noopener noreferrer">Mermaid</a>.
Avec quelques lignes de textes, il est possible de créer des diagrammes de toutes sortes, intégrables directement dans une page web ou un fichier Markdown.</p>
<p>Voyons ensemble ses avantages et comment tirer parti ses fonctionnalités.</p>
<p>Un sujet un peu plus léger que les précédents, mais tout aussi intéressant. Ne t'inquiète pas, je continuerai à te parler de Spring, mais là, j'ai envie de te parler de <a href="https://mermaid.js.org/" target="_blank" rel="noopener noreferrer">Mermaid</a>.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="mermaid-des-diagrammes-faciles-à-réaliser-et-à-intégrer">Mermaid, des diagrammes faciles à réaliser et à intégrer<a href="https://nathaniel-vaur-henel.github.io/blog/mermaid#mermaid-des-diagrammes-faciles-%C3%A0-r%C3%A9aliser-et-%C3%A0-int%C3%A9grer" class="hash-link" aria-label="Lien direct vers Mermaid, des diagrammes faciles à réaliser et à intégrer" title="Lien direct vers Mermaid, des diagrammes faciles à réaliser et à intégrer">​</a></h2>
<p>Dans mon article précédent sur <a href="https://nathaniel-vaur-henel.github.io/blog/continue-spring">Spring</a>, j'ai mis ce "magnifique" <a href="https://nathaniel-vaur-henel.github.io/blog/continue-spring#le-processus-dune-action-initialis%C3%A9e-par-le-client">diagramme</a> que j'ai fait tout seul. Comme j'ai eu d'excellents retours, je me suis dit que j'allais te donner mon secret. J'ai utilisé <a href="https://mermaid.js.org/" target="_blank" rel="noopener noreferrer">Mermaid</a>. Ce superbe diagramme a été créé avec une trentaine de ligne de <em>texte</em>. Et c'est tout.</p>
<p>Mais alors, qu'est-ce que <a href="https://mermaid.js.org/" target="_blank" rel="noopener noreferrer">Mermaid</a>&nbsp;? C'est une librairie JavaScript qui te permet de faire des diagrammes, des graphiques, des schémas, des trucs visuels quoi. Et tout ça, directement dans ton Markdown ou dans ta page web.</p>
<p>Un petit exemple pour la route&nbsp;:</p>
<!-- -->
<p>Ce diagramme m'a pris 5 minutes à faire. Le plus long&nbsp;? Trouver l'idée. Il est directement intégré dans mon article, je n'ai pas utilisé de logiciel externe de dessin, il est responsive et pèse 8 lignes. Tu ne me crois pas&nbsp;? Les voici&nbsp;:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">graph TD</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    A[Je lis des blogs] --&gt; B{celui de Nathaniel&nbsp;?}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    B --&gt;|Oui| C{Je continue de le lire car j'aime}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    B --&gt;|Non| X[Qu'est ce que tu fais ici&nbsp;?]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    X --&gt;|essaie encore| A</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    C --&gt;|Oui| D[Je le partage]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    D --&gt;|Et aussi| E[Je commente]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    C --&gt;|Non| X</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copier le code" title="Copier" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Tu peux aussi le tester dans le <a href="https://mermaid.live/edit#pako:eNpVkM1OwzAQhF9l5Usv7QvkQNUmvSBRhOBQKelhsTeNK_8Ee31ASd4dJwEBe7Jmv1mPZhDSKxKFuAXsO3irGgd5DvUjgdERFEV4N_4Wr7DbPcBxkGSSzjKckTt0mgzsp9V0nJHxOekRyiH7pXesXaKZNvO5kDUMcN-gtvTPdPZuhEv9kjYUGSTBR7ZxghZzBi017K8rfllwihE1ATnpA41wWHfl7__Vkp-gx8B4o29ztQAnBkwxZupULymtJcc_TPknj9gKS8GiVrmgYd43gjuy1IgiPxW1mAw3onFTRjGxf_10UhQcEm1F6hUyVRpztVYULZqYVVKafXhaS1-6n74AYr18iQ" target="_blank" rel="noopener noreferrer">Mermaid live editor</a>. Je t'en reparlerai.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="mermaid-un-outil-de-création-de-diagrammes-aux-multiples-fonctionnalités">Mermaid, un outil de création de diagrammes aux multiples fonctionnalités<a href="https://nathaniel-vaur-henel.github.io/blog/mermaid#mermaid-un-outil-de-cr%C3%A9ation-de-diagrammes-aux-multiples-fonctionnalit%C3%A9s" class="hash-link" aria-label="Lien direct vers Mermaid, un outil de création de diagrammes aux multiples fonctionnalités" title="Lien direct vers Mermaid, un outil de création de diagrammes aux multiples fonctionnalités">​</a></h3>
<p>Comme toujours, si tu veux tout savoir, va lire la <a href="https://mermaid.js.org/intro/" target="_blank" rel="noopener noreferrer">doc officielle</a>. Mais je vais quand même te présenter les bases de Mermaid&nbsp;:</p>
<ul>
<li>Quand j'écris ce blog, Mermaid sait gérer une vingtaine de types de diagrammes différents, dont 3 ou 4 en beta.</li>
<li>Tu peux créer et tester tes diagrammes en ligne avec le <a href="https://mermaid.live/" target="_blank" rel="noopener noreferrer">Mermaid live editor</a>.</li>
<li>Différents <a href="https://mermaid.js.org/config/theming.html" target="_blank" rel="noopener noreferrer">thèmes</a> sont disponibles pour personnaliser tes diagrammes. Et tu peux les personnaliser toi-même si tu veux.</li>
<li>Mermaid se veut <a href="https://mermaid.js.org/config/accessibility.html" target="_blank" rel="noopener noreferrer">accessible</a>.</li>
<li>Si tu veux, tu peux aussi exporter tes diagrammes en SVG ou PNG grâce à la <a href="https://github.com/mermaid-js/mermaid-cli" target="_blank" rel="noopener noreferrer">Mermaid CLI</a>.</li>
<li>Je viens de l'apprendre en rédigeant cet article et je trouve ça génial&nbsp;! Tu peux faire des diagrammes <a href="https://mermaid.js.org/config/math.html" target="_blank" rel="noopener noreferrer">Mathématiques</a>&nbsp;:<!-- -->
<!-- -->
<!-- -->Au moment où j'écris cet article, cette fonctionnalité n'est pas disponible partout. Par exemple, elle est disponible dans le <a href="https://mermaid.live/edit#pako:eNpVkctqwzAQRX9lGExJcLKIuzOk0CTdddUuO3WR5XFiiO1UHhcXRf9e-RUarcSZq3NhZFHXGWOMAEejLid4faMKhvP8QRgEXRIFAeEnrNdP1x4QNd9GbBc-un5whd1ixLlR2m6cjQa-vGn-vax_2KQ-xlaFaahdYomEO7FVLewm337yXQowY_nNtetdcBgCHWyBKOVjUVmtGm4cKHiYfEUODlI_JwJ9TzNPucqmN3f6_aB_GfULWW7112auSEslpujcmkjXjRUX-kV4Lm4oiWY82ec4JzaSsQVXWLIpVZH5ddu-k1BOXDJh7K8Z56o9CyFVzkdVK_X7b6UxFtPyCttLpoQPhfLfVGKcq3PD7g83OYz6" target="_blank" rel="noopener noreferrer">live editor</a> ou dans Docusaurus, mais pas encore dans le plugin <a href="https://plugins.jetbrains.com/plugin/20146-mermaid" target="_blank" rel="noopener noreferrer">JetBrains</a> ni sur <a href="https://github.com/Nathaniel-Vaur-Henel/nathaniel-vaur-henel.github.io/wiki/Diagrammes-avec-Mermaid#test-de-diagramme-de-math%C3%A9matiques" target="_blank" rel="noopener noreferrer">GitHub</a>.</li>
</ul>
<p>Bien sûr, je n'ai pas tout listé. Prends le temps de lire la <a href="https://mermaid.js.org/intro/" target="_blank" rel="noopener noreferrer">doc officielle</a> pour en savoir plus.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="les-différentes-possibilités-dintégration-de-mermaid">Les différentes possibilités d'intégration de Mermaid<a href="https://nathaniel-vaur-henel.github.io/blog/mermaid#les-diff%C3%A9rentes-possibilit%C3%A9s-dint%C3%A9gration-de-mermaid" class="hash-link" aria-label="Lien direct vers Les différentes possibilités d'intégration de Mermaid" title="Lien direct vers Les différentes possibilités d'intégration de Mermaid">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="dans-un-fichier-markdown">Dans un fichier Markdown<a href="https://nathaniel-vaur-henel.github.io/blog/mermaid#dans-un-fichier-markdown" class="hash-link" aria-label="Lien direct vers Dans un fichier Markdown" title="Lien direct vers Dans un fichier Markdown">​</a></h4>
<p>Si Markdown est pris en charge là où tu veux faire ton diagramme, tu peux
certainement utiliser <a href="https://mermaid.js.org/" target="_blank" rel="noopener noreferrer">Mermaid</a>. Par exemple, il est pris en charge nativement dans <a href="https://gitlab.com/" target="_blank" rel="noopener noreferrer">GitLab</a> et <a href="https://github.com/" target="_blank" rel="noopener noreferrer">GitHub</a> dans tous les fichiers <code>.md</code>. C'est pratique pour mettre des diagrammes dans ton <code>README.md</code> par exemple.</p>
<p>Parfois, il faut installer un plugin, comme dans <a href="https://www.atlassian.com/software/jira" target="_blank" rel="noopener noreferrer">Jira</a> ou <a href="https://docusaurus.io/" target="_blank" rel="noopener noreferrer">Docusaurus</a>.</p>
<p>Tu trouveras une liste des diverses intégrations sur le <a href="https://mermaid.js.org/ecosystem/integrations-community.html" target="_blank" rel="noopener noreferrer">site officiel de Mermaid</a>. C'est ce que j'ai fait pour mon site, qui utilise <a href="https://docusaurus.io/" target="_blank" rel="noopener noreferrer">Docusaurus</a>.</p>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>L'astuce de ton dev sensei</div><div class="admonitionContent_BuS1"><p>Comme Mermaid est intégré à GitHub et à GitLab. Tu peux créer tes
diagrammes et autres schémas directement dans les différents fichiers markdown de ton repository, le <code>README.md</code> par exemple, ou dans le wiki, comme cet <a href="https://github.com/Nathaniel-Vaur-Henel/nathaniel-vaur-henel.github.io/wiki/Diagrammes-avec-Mermaid" target="_blank" rel="noopener noreferrer">exemple dans un wiki GitHub</a>.</p></div></div>
<p>Tu trouveras facilement un plugin pour ton IDE préféré. Par exemple, pour <a href="https://www.jetbrains.com/idea/" target="_blank" rel="noopener noreferrer">IntelliJ IDEA</a>, tu as un <a href="https://plugins.jetbrains.com/plugin/20146-mermaid" target="_blank" rel="noopener noreferrer">plugin Mermaid</a> qui te permet de visualiser les diagrammes Mermaid directement dans ton éditeur.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="sur-un-site-web">Sur un site web<a href="https://nathaniel-vaur-henel.github.io/blog/mermaid#sur-un-site-web" class="hash-link" aria-label="Lien direct vers Sur un site web" title="Lien direct vers Sur un site web">​</a></h4>
<p>Tu peux aussi l'utiliser directement dans une page web. Il te suffit d'ajouter le script mermaid et le tour est joué. Voici l'exemple d'implémentation issu du site de Mermaid que tu peux retrouver <a href="https://mermaid.js.org/config/usage.html#simple-full-example" target="_blank" rel="noopener noreferrer">ici</a>&nbsp;:</p>
<div class="language-html codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-html codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token doctype punctuation" style="color:#393A34;font-style:italic">&lt;!</span><span class="token doctype doctype-tag" style="color:#999988;font-style:italic">DOCTYPE</span><span class="token doctype" style="color:#999988;font-style:italic"> </span><span class="token doctype name" style="color:#999988;font-style:italic">html</span><span class="token doctype punctuation" style="color:#393A34;font-style:italic">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">html</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">lang</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag attr-value" style="color:#e3116c">en</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">body</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">pre</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">class</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag attr-value" style="color:#e3116c">mermaid</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  graph LR</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      A --- B</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      B--&gt;C[fa:fa-ban forbidden]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      B--&gt;D(fa:fa-spinner);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">pre</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">script</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">type</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag attr-value" style="color:#e3116c">module</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token script language-javascript"></span><br></span><span class="token-line" style="color:#393A34"><span class="token script language-javascript">  </span><span class="token script language-javascript keyword module" style="color:#00009f">import</span><span class="token script language-javascript"> </span><span class="token script language-javascript imports">mermaid</span><span class="token script language-javascript"> </span><span class="token script language-javascript keyword module" style="color:#00009f">from</span><span class="token script language-javascript"> </span><span class="token script language-javascript string" style="color:#e3116c">'https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs'</span><span class="token script language-javascript punctuation" style="color:#393A34">;</span><span class="token script language-javascript"></span><br></span><span class="token-line" style="color:#393A34"><span class="token script language-javascript"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">script</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">body</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">html</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copier le code" title="Copier" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Je l'ai testé en local, ça marche vraiment tout seul&nbsp;!</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="avec-un-éditeur-en-ligne">Avec un éditeur en ligne<a href="https://nathaniel-vaur-henel.github.io/blog/mermaid#avec-un-%C3%A9diteur-en-ligne" class="hash-link" aria-label="Lien direct vers Avec un éditeur en ligne" title="Lien direct vers Avec un éditeur en ligne">​</a></h4>
<p>Et sinon, tu as toujours la solution du <a href="https://mermaid.live/edit" target="_blank" rel="noopener noreferrer">live editor Mermaid</a>, un site web qui te fait le rendu de ton code Mermaid en temps réel. Il contient quelques exemples aussi, qui te permettront de découvrir Mermaid. Ce <a href="https://mermaid.live/edit" target="_blank" rel="noopener noreferrer">live editor</a> te permet aussi de télécharger ton diagramme, sous divers formats comme le SVG ou le PNG. C'est très pratique pour ajouter un beau diagramme à ta présentation ou à ton document.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="mermaid-une-grande-diversité-de-diagrammes-à-portée-de-main">Mermaid, une grande diversité de diagrammes à portée de main<a href="https://nathaniel-vaur-henel.github.io/blog/mermaid#mermaid-une-grande-diversit%C3%A9-de-diagrammes-%C3%A0-port%C3%A9e-de-main" class="hash-link" aria-label="Lien direct vers Mermaid, une grande diversité de diagrammes à portée de main" title="Lien direct vers Mermaid, une grande diversité de diagrammes à portée de main">​</a></h2>
<p>Je vais te présenter quelques types de diagrammes que tu peux faire avec Mermaid. Si tu veux en savoir plus, tu as, comme toujours, la <a href="https://mermaid.js.org/intro/" target="_blank" rel="noopener noreferrer">doc officielle</a>.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="diagramme-de-flux">Diagramme de flux<a href="https://nathaniel-vaur-henel.github.io/blog/mermaid#diagramme-de-flux" class="hash-link" aria-label="Lien direct vers Diagramme de flux" title="Lien direct vers Diagramme de flux">​</a></h3>
<p>Tu peux choisir le sens de ton diagramme de flux très simplement.</p>
<!-- -->
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_Ktv7">Le code pour le diagramme de flux 'de haut en bas'</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">---</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">title: De haut en bas</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">---</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">graph TD</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    A --&gt; B</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    B --&gt; C</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    A --&gt; D</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    D --&gt; E</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copier le code" title="Copier" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<!-- -->
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_Ktv7">Le code pour le diagramme de flux 'de gauche à droite'</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">---</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">title: De gauche à droite</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">---</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">graph LR</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    A --&gt; B</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    B --&gt; C</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    A --&gt; D</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    D --&gt; E</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copier le code" title="Copier" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Tu peux aussi choisir le style de tes liens, la forme de tes nœuds, et appliquer des styles CSS à tes nœuds et tes liens.</p>
<!-- -->
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_Ktv7">Le code pour le diagramme de flux 'Exemple de style'</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">---</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">title: Exemple de style</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">---</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">graph LR</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  A[[A]] -.-&gt; B{{B}}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  A --- B</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  B ==&gt; C((C))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  A &lt;--&gt;|un peu de texte?| D[(D)]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  D x--x E</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  D o--o E</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    style B fill:#ccf,stroke:#f66,stroke-width:2px,stroke-dasharray: 5, 5</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    style C fill:#f9f,stroke:#333,stroke-width:4px</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copier le code" title="Copier" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="diagramme-de-séquence">Diagramme de séquence<a href="https://nathaniel-vaur-henel.github.io/blog/mermaid#diagramme-de-s%C3%A9quence" class="hash-link" aria-label="Lien direct vers Diagramme de séquence" title="Lien direct vers Diagramme de séquence">​</a></h3>
<p>Tu peux aussi faire des diagrammes de séquence, ce qui est très utile pour expliquer des processus, des interactions, des scénarios. C'est celui que j'ai utilisé dans mon article sur <a href="https://nathaniel-vaur-henel.github.io/blog/continue-spring#le-processus-dune-action-initialis%C3%A9e-par-le-client">Spring</a>.</p>
<!-- -->
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_Ktv7">Le code pour le diagramme de séquence 'Une petite discussion'</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    participant N as Nathaniel</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    participant T as Toi</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    N-&gt;&gt;T: Salut Toi, comment ça va&nbsp;?</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    T-&gt;&gt;N: Salut Nathaniel, ça va bien et toi&nbsp;?</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    N-&gt;&gt;T: Ça va, je suis en train de te parler de Mermaid</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    T-&gt;&gt;N: Ah, c'est cool, je vais aller voir ça&nbsp;!</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copier le code" title="Copier" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Dans ce type de diagramme, tu peux aussi choisir tes flèches, les styles de tes participants, et plein d'autres choses. Tu peux consulter la <a href="https://mermaid.js.org/syntax/sequenceDiagram.html" target="_blank" rel="noopener noreferrer">doc sur les Sequence Diagrams</a>.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="diagramme-de-classes">Diagramme de Classes<a href="https://nathaniel-vaur-henel.github.io/blog/mermaid#diagramme-de-classes" class="hash-link" aria-label="Lien direct vers Diagramme de Classes" title="Lien direct vers Diagramme de Classes">​</a></h3>
<p>Tu peux aussi faire des diagrammes de classes pour expliquer des structures de données, des relations entre objets, des héritages.</p>
<!-- -->
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_Ktv7">Le code pour le diagramme de classes 'Un exemple de diagramme de classes'</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">---</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">title: Un exemple de diagramme de classes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">---</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">classDiagram</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  class page {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    url string</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    titre string</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    contenu byte[]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    estCommentable() boolean</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  class blog {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    tempsDeLecture int</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    auteur string</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    dateDePublication date</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  class devento {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ficheTechnique string</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    aideMémoire string</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  class devWorkout {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    exercice string[]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    solution string[]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  page &lt;|-- devento</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  page &lt;|-- devWorkout</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  page &lt;|-- blog</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copier le code" title="Copier" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Tu peux utiliser des symboles pour les modificateurs de visibilité, différentes flèches pour les différentes relations, tu peux définir des namespaces, des interfaces, des abstractions, de la cardinalité et bien d'autres choses&nbsp;! Comme toujours, pour en savoir plus, tu as la <a href="https://mermaid.js.org/syntax/classDiagram.html" target="_blank" rel="noopener noreferrer">doc sur les Class Diagrams</a>.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="les-camemberts">Les camemberts<a href="https://nathaniel-vaur-henel.github.io/blog/mermaid#les-camemberts" class="hash-link" aria-label="Lien direct vers Les camemberts" title="Lien direct vers Les camemberts">​</a></h3>
<p>Comment te parler de diagrammes sans te parler de camemberts&nbsp;? Moi, j'adore&nbsp;! Tu peux les utiliser pour expliquer des répartitions, des pourcentages, des parts de marché.</p>
<!-- -->
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_Ktv7">Le code pour le diagramme de camembert 'Un exemple de fromage'</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">---</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">title: Un exemple de fromage</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">---</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pie showData</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    "Camembert" : 10</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    "Brie" : 5</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    "Reblochon" : 20</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    "Emmental" : 4</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copier le code" title="Copier" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Tu peux remarquer que <a href="https://mermaid.js.org/" target="_blank" rel="noopener noreferrer">Mermaid</a> calcule automatiquement les pourcentages. Il n'y a pas grand-chose à savoir sur les camemberts, mais si tu veux en savoir plus, tu as la <a href="https://mermaid.js.org/syntax/pie.html" target="_blank" rel="noopener noreferrer">doc sur les Pie Charts</a>.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="le-diagramme-git">Le diagramme Git<a href="https://nathaniel-vaur-henel.github.io/blog/mermaid#le-diagramme-git" class="hash-link" aria-label="Lien direct vers Le diagramme Git" title="Lien direct vers Le diagramme Git">​</a></h3>
<p>Le diagramme Git est vraiment génial. Tu peux faire des diagrammes de branches Git qui te servent à expliquer des branches, des merges, des rebases.</p>
<!-- -->
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_Ktv7">Le code pour le diagramme de Git 'Un exemple de diagramme Git'</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">---</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">title: Un exemple de diagramme Git</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">---</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">gitGraph</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  commit id: "custom"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  commit type: REVERSE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  branch develop</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  commit</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  commit tag:"v1.0.0"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  commit</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  checkout main</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  commit</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  commit</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  merge develop</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  commit</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  commit type: HIGHLIGHT</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copier le code" title="Copier" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Comme toujours, je ne te montre qu'un aperçu. Va voir la <a href="https://mermaid.js.org/syntax/gitgraph.html" target="_blank" rel="noopener noreferrer">doc sur les Git Graphs</a> pour en savoir plus.</p>
<p>Si tu veux voir un schéma plus complexe, tu en trouveras dans la <a href="https://mermaid.js.org/syntax/gitgraph.html#hiding-branch-names-and-lines" target="_blank" rel="noopener noreferrer">doc sur les Git Graphs</a>. Il y en a qui ressemblent plus à une carte de transport en commun qu'à un schéma Git.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="pour-aller-plus-loin">Pour aller plus loin<a href="https://nathaniel-vaur-henel.github.io/blog/mermaid#pour-aller-plus-loin" class="hash-link" aria-label="Lien direct vers Pour aller plus loin" title="Lien direct vers Pour aller plus loin">​</a></h2>
<p>Voici quelques liens pour approfondir les sujets abordés dans cet article en attendant le prochain article&nbsp;!</p>
<ul>
<li><a href="https://mermaid.js.org/" target="_blank" rel="noopener noreferrer">Mermaid JS</a></li>
<li>Wikipedia&nbsp;:<!-- -->
<ul>
<li><a href="https://fr.wikipedia.org/wiki/Diagramme" target="_blank" rel="noopener noreferrer">Diagramme</a></li>
<li><a href="https://en.wikipedia.org/wiki/Mermaid" target="_blank" rel="noopener noreferrer">Mermaid</a></li>
</ul>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="conclusion">Conclusion<a href="https://nathaniel-vaur-henel.github.io/blog/mermaid#conclusion" class="hash-link" aria-label="Lien direct vers Conclusion" title="Lien direct vers Conclusion">​</a></h2>
<p>Pour cet article plus court que les précédents, je t'ai présenté un super outil pour faire des diagrammes et des schémas facilement. Je t'ai expliqué où et comment l'utiliser, et je t'ai montré quelques exemples.</p>
<p>J'espère que tu as appris des choses. Et j'espère que tu as envie d'en apprendre encore plus. Parce que c'est pas fini. Et je te donne rendez-vous dans le prochain article, pour la suite de Spring&nbsp;? Ou pour un autre sujet&nbsp;?</p>
<p>Si tu as envie que j'explique plus en avant certains concepts ou que je parle de quelque chose en particulier, n'hésite pas à me le dire dans les commentaires.</p>
<p>Et bon entrainement&nbsp;!</p>]]></content:encoded>
            <category>outil</category>
            <category>mermaid</category>
            <category>markdown</category>
        </item>
        <item>
            <title><![CDATA[Développer son premier projet Spring : poser de bonnes bases]]></title>
            <link>https://nathaniel-vaur-henel.github.io/blog/continue-spring</link>
            <guid>https://nathaniel-vaur-henel.github.io/blog/continue-spring</guid>
            <pubDate>Fri, 01 Mar 2024 00:00:00 GMT</pubDate>
            <description><![CDATA[Que l'on soit un développeur Java débutant ou non, il est nécessaire de consulter un tutoriel complet avant de lancer son premier projet Spring. En effet, ce framework peut être difficile à prendre en main. Une bonne technique d'approche est nécessaire pour ne pas se perdre dans son apprentissage. La plupart des tutoriels que j'ai vus jusqu'ici m'ont semblé trop compliqués pour être utilisés sur un premier projet. Cet article propose de créer un projet Spring simple qui permet d'assimiler les bases sans s'encombrer de la complexité du framework.]]></description>
            <content:encoded><![CDATA[<p>Que l'on soit un développeur Java débutant ou non, il est nécessaire de consulter un tutoriel complet avant de lancer son premier projet Spring. En effet, ce framework peut être difficile à prendre en main. Une bonne technique d'approche est nécessaire pour ne pas se perdre dans son apprentissage. La plupart des tutoriels que j'ai vus jusqu'ici m'ont semblé trop compliqués pour être utilisés sur un premier projet. Cet article propose de créer un projet Spring simple qui permet d'assimiler les bases sans s'encombrer de la complexité du framework.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="concevoir-un-premier-projet-spring-avec-spring-initializr">Concevoir un premier projet Spring avec Spring Initializr<a href="https://nathaniel-vaur-henel.github.io/blog/continue-spring#concevoir-un-premier-projet-spring-avec-spring-initializr" class="hash-link" aria-label="Lien direct vers Concevoir un premier projet Spring avec Spring Initializr" title="Lien direct vers Concevoir un premier projet Spring avec Spring Initializr">​</a></h2>
<p>Dans <a href="https://nathaniel-vaur-henel.github.io/blog/begin-spring">l'article précédent</a>, je t'ai expliqué comment créer un projet Spring avec Spring Initializr. Il s'agit selon moi du moyen le plus efficace de se lancer avec Spring. Cet article étant la suite directe, je t'en recommande la lecture si ce n'est déjà fait.</p>
<p>Le but maintenant est de se familiariser avec les annotations de base de Spring. Pour ce faire, je te propose de créer sur un petit sac fourre-tout afin de te familiariser avec les fonctionnalités de base.
Reprends le projet créé pour l'article précédent, et complétons-le ensemble.</p>
<div class="theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>attention</div><div class="admonitionContent_BuS1"><p>Comme précédemment, je vais considérer que tu as déjà des bases en Java. Si ce n'est pas le cas, je te conseille de commencer par là. Tu trouveras plein de ressources sur le net pour apprendre Java. J'ai toujours aimé les cours d'<a href="https://openclassrooms.com/fr/courses/6173501-apprenez-a-programmer-en-java" target="_blank" rel="noopener noreferrer">OpenClassrooms</a>, mais il y en a plein d'autres. Et tu pourras trouver quelques conseils sur ce site.</p></div></div>
<p>Nous allons créer un sac <del>de grain de café</del> fourre-tout. Le but&nbsp;: faire une liste d'objets (ou de ce qu'on veut, c'est un sac super magique).<br>
<!-- -->Nous allons donc créer de quoi&nbsp;:</p>
<ol>
<li>Ajouter des choses.</li>
<li>Lister les choses.</li>
<li>Lire une chose.</li>
<li>Modifier une chose.</li>
<li>Supprimer une chose.</li>
</ol>
<p>Et c'est déjà pas mal.</p>
<div class="theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>attention</div><div class="admonitionContent_BuS1"><p>Il y a plusieurs techniques, plusieurs écoles, plusieurs manières de faire. Je vais t'en montrer une. Elle est simple et efficace, mais tu pourras trouver d'autres manières de faire. Le but, c'est de te montrer les bases, et après, tu pourras faire comme tu veux. Ou comme tu dois.</p></div></div>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>remarque</div><div class="admonitionContent_BuS1"><p>Je ferai certainement des <a href="https://nathaniel-vaur-henel.github.io/devento">Devento</a> pour expliquer tout ce que je vais te présenter, mais pour l'instant, je te conseille de lire les liens que je t'ai mis. Et tu peux aussi faire des recherches dans ton moteur de recherche préféré. Et sur les sites de référence que j'ai mis dans le pied de page du site&nbsp;!</p></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="lapplication">L'application<a href="https://nathaniel-vaur-henel.github.io/blog/continue-spring#lapplication" class="hash-link" aria-label="Lien direct vers L'application" title="Lien direct vers L'application">​</a></h3>
<p>Nous allons faire une application serveur en <a href="https://fr.wikipedia.org/wiki/Representational_state_transfer" target="_blank" rel="noopener noreferrer">REST</a>&nbsp;: nous allons définir des <a href="https://en.wikipedia.org/wiki/Endpoint_interface" target="_blank" rel="noopener noreferrer">endpoints</a> pour faire des actions sur notre sac.</p>
<p>Les <a href="https://fr.wikipedia.org/wiki/Hypertext_Transfer_Protocol#M%C3%A9thodes" target="_blank" rel="noopener noreferrer">verbes, ou méthodes, HTTP</a> que nous allons utiliser sont&nbsp;:</p>
<ul>
<li><code>GET</code> pour lire des données.</li>
<li><code>POST</code> pour créer des données.</li>
<li><code>PUT</code> pour modifier des données.</li>
<li><code>DELETE</code> pour supprimer des données.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="larchitecture">L'architecture<a href="https://nathaniel-vaur-henel.github.io/blog/continue-spring#larchitecture" class="hash-link" aria-label="Lien direct vers L'architecture" title="Lien direct vers L'architecture">​</a></h3>
<p>Nous allons partir sur une architecture très simple et très découpée d'application server. Voici les types de classes que nous allons créer&nbsp;:</p>
<ul>
<li>Une <code>Entity</code>, qui représente un objet en bases de données.</li>
<li>Un <code>Repository</code>, qui permet de manipuler ces entités.</li>
<li>Des <code>UseCase</code>, qui permettent de faire des actions sur ces entités. Tu as un <code>UseCase</code> par action.</li>
<li>Un <code>Controller</code>, qui permet de faire le lien entre l'application et l'extérieur.</li>
<li>Un <code>DTO</code>, un <a href="https://fr.wikipedia.org/wiki/Objet_de_transfert_de_donn%C3%A9es" target="_blank" rel="noopener noreferrer">Data Transfer Object</a>, qui est l'objet que s'échangeront notre serveur et ses clients.</li>
<li>Un <code>Mapper</code>, qui permet de faire le lien entre les entités et les DTO.</li>
</ul>
<p>Une classe, un rôle. C'est simple, c'est efficace, c'est facile à comprendre. Et c'est le but et le leitmotiv de tout l'article.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="le-processus-dune-action-initialisée-par-le-client">Le processus d'une action initialisée par le client<a href="https://nathaniel-vaur-henel.github.io/blog/continue-spring#le-processus-dune-action-initialis%C3%A9e-par-le-client" class="hash-link" aria-label="Lien direct vers Le processus d'une action initialisée par le client" title="Lien direct vers Le processus d'une action initialisée par le client">​</a></h3>
<p>Dans notre application, nos composants vont intéragir entre eux. Comme dit précédemment, le mieux, c'est que chacun aie sa propre responsabilité.<br>
<!-- -->Voici un résumé de qui fait quoi dans notre application&nbsp;:</p>
<ul>
<li>Le <code>Client</code> envoie une requête HTTP au <code>Serveur</code>.</li>
<li>Le <code>Serveur</code> distribue la requête <a href="https://fr.wikipedia.org/wiki/S%C3%A9rialisation" target="_blank" rel="noopener noreferrer">désérialisée</a> au <code>Controller</code> en validant les paramètres. Si besoin, c'est à ce moment, là que le <code>DTO</code> apparait sous forme de paramètre de requête.</li>
<li>Le <code>Controller</code> demande au <code>UseCase</code> d'effectuer la tâche, en lui passant les paramètres dont il aura besoin.</li>
<li>Le <code>UseCase</code> effectue la tâche. C'est là que se trouve tout le métier. C'est lui qui fait appel aux autres composants.<!-- -->
<ul>
<li>S'il a besoin de transformer un <code>DTO</code> en <code>Entity</code> ou inversement, il appelle un <code>Mapper</code>.</li>
<li>S'il a besoin d'un accès à la base de donnée, il appelle un <code>Repository</code>.</li>
<li>S'il a besoin d'un autre composant, il l'appelle directement.</li>
</ul>
</li>
<li>Le <code>UseCase</code> retourne un <code>DTO</code> ou une valeur au <code>Controller</code>.</li>
<li>Le <code>Controller</code> retourne une réponse HTTP au <code>Serveur</code> sous forme d'objet Java.</li>
<li>Le <code>Serveur</code> <a href="https://fr.wikipedia.org/wiki/S%C3%A9rialisation" target="_blank" rel="noopener noreferrer">serialise</a> l'objet java en requête HTTP qu'il retourne au <code>Client</code>.</li>
</ul>
<!-- -->
<p>Pour résumer, dans un <code>GET</code>:</p>
<ul>
<li>Le <code>Client</code> est le composant qui envoie les requêtes HTTP au <code>Server</code> et qui reçoit les réponses HTTP du <code>Server</code>. Cela peut être une interface graphique, une autre application, un script, etc.</li>
<li>Le <code>Server</code> est le composant qui reçoit les requêtes HTTP du <code>Client</code> et qui retourne les réponses HTTP au <code>Client</code>. Dans notre cas, c'est un serveur Web Spring Boot.</li>
<li>Le <code>Controller</code> est le point d'entrée de l'application. Il reçoit les requêtes HTTP et retourne les réponses HTTP. Il ne sait gérer que ça&nbsp;!</li>
<li>Le <code>UseCase</code> est le cœur de l'application. Il ne sait pas gérer les requêtes HTTP. Il ne sait pas non plus gérer les accès à la base de donnée. Il ne sait que gérer le métier et demander aux autres composants de faire ce qu'ils savent faire.</li>
<li>Le <code>Mapper</code> est un composant qui transforme un <code>DTO</code> en <code>Entity</code> ou inversement.</li>
<li>Le <code>Repository</code> est un composant qui gère les accès à la base de donnée.</li>
<li>Le <code>DTO</code> est un objet qui représente une requête HTTP ou une réponse HTTP. Il est utilisé pour communiquer entre le <code>Controller</code> et le <code>UseCase</code>.</li>
<li>L'<code>Entity</code> est un objet qui représente une ligne de la base de donnée. Il est utilisé pour communiquer entre le <code>UseCase</code> et le <code>Repository</code>.</li>
</ul>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>remarque</div><div class="admonitionContent_BuS1"><p>Dans notre cas, c'est Spring qui va s'occuper de la [désérialisation et de la sérialisation](https: //fr.wikipedia.org/wiki/S%C3%A9rialisation) des objets Java en requête HTTP. Tout seul, grâce à la magie des annotations. Et grâce à une library qui s'appelle <a href="https://github.com/FasterXML/jackson" target="_blank" rel="noopener noreferrer">Jackson</a></p></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="les-dépendances">Les dépendances<a href="https://nathaniel-vaur-henel.github.io/blog/continue-spring#les-d%C3%A9pendances" class="hash-link" aria-label="Lien direct vers Les dépendances" title="Lien direct vers Les dépendances">​</a></h3>
<p>Nous allons utiliser les dépendances que nous avons ajoutées dans le projet de l'article <a href="https://nathaniel-vaur-henel.github.io/blog/begin-spring#avant-de-commencer-pr%C3%A9sentation-des-d%C3%A9pendances">Débuter avec Spring grâce à Spring Initializr</a>.</p>
<p>Rien de plus.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="écrivons-notre-projet-spring">Écrivons notre projet Spring&nbsp;!<a href="https://nathaniel-vaur-henel.github.io/blog/continue-spring#%C3%A9crivons-notre-projet-spring" class="hash-link" aria-label="Lien direct vers Écrivons notre projet Spring&nbsp;!" title="Lien direct vers Écrivons notre projet Spring&nbsp;!">​</a></h2>
<blockquote>
<p>On va Springer©&nbsp;!</p>
</blockquote>
<p>Commençons par le début. Ou la fin, tout dépend du point de vue. Nous, nous allons faire les choses dans l'ordre que je t'ai donné <a href="https://nathaniel-vaur-henel.github.io/blog/continue-spring#larchitecture">plus haut</a>.</p>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>remarque</div><div class="admonitionContent_BuS1"><p>J'aime écrire mon code tout en anglais. Comme tout, c'est une question d'habitude et de choix personnel ou d'équipe. Par contre, je vais t'écrire toute la doc en français pour plus de simplicité.</p><p>Pour faire simple, je vais tout mettre dans le même package même si ce n'est pas recommandé. Je traiterai plus tard les histoires de Clean architecture, d'architecture hexagonale ou autres. Il n'est pas nécessaire de connaître ces points pour avancer. D'autres articles&nbsp;? Des <a href="https://nathaniel-vaur-henel.github.io/devento">Devento</a>&nbsp;? On verra...</p></div></div>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>L'astuce de ton dev sensei</div><div class="admonitionContent_BuS1"><p>Ne copie colle pas le code. Jamais. Enfin, pas tout de suite. Lis-le, comprends-le, et, pour ça, écris-le. L'apprentissage passe par là. Si tu lis cet article, tu as besoin de pratiquer. Alors commence maintenant. Tiens, je devrais écrire un article sur la pratique, le copier-coller, et tout ça...</p></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="écrivons-lentity">Écrivons l'Entity<a href="https://nathaniel-vaur-henel.github.io/blog/continue-spring#%C3%A9crivons-lentity" class="hash-link" aria-label="Lien direct vers Écrivons l'Entity" title="Lien direct vers Écrivons l'Entity">​</a></h3>
<p>C'est l'objet, au sens <a href="https://fr.wikipedia.org/wiki/Programmation_orient%C3%A9e_objet" target="_blank" rel="noopener noreferrer">POO</a>, que nous allons manipuler en base de donnée. C'est un simple objet, avec des attributs, des getters et des setters. C'est tout. C'est une classe Java, rien de plus.</p>
<p>Il ne sera manipuler que par nos Use Cases et par notre repository. Le Controller n'en aura jamais connaissance. Cela permet de désolidariser ton IHM de ta BDD.</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_Ktv7">SomethingEntity.java</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">package</span><span class="token plain"> </span><span class="token namespace" style="opacity:0.7">fr</span><span class="token namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token namespace" style="opacity:0.7">nvh</span><span class="token namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token namespace" style="opacity:0.7">begin</span><span class="token namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token namespace" style="opacity:0.7">spring</span><span class="token namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token namespace" style="opacity:0.7">bag</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token import namespace" style="opacity:0.7">jakarta</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">persistence</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import class-name">Entity</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token import namespace" style="opacity:0.7">jakarta</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">persistence</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import class-name">GeneratedValue</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token import namespace" style="opacity:0.7">jakarta</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">persistence</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import class-name">GenerationType</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token import namespace" style="opacity:0.7">jakarta</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">persistence</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import class-name">Id</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token import namespace" style="opacity:0.7">lombok</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import class-name">Getter</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token import namespace" style="opacity:0.7">lombok</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import class-name">Setter</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token import namespace" style="opacity:0.7">lombok</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import class-name">ToString</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token annotation punctuation" style="color:#393A34">@Entity</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// indique que cette classe est une entité JPA, c'est obligatoire pour que JPA puisse la gérer</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token annotation punctuation" style="color:#393A34">@Getter</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// Lombok : génère automatiquement les getters</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token annotation punctuation" style="color:#393A34">@Setter</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// Lombok : génère automatiquement les setters</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token annotation punctuation" style="color:#393A34">@ToString</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// Lombok : génère automatiquement la méthode toString()</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">SomethingEntity</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token annotation punctuation" style="color:#393A34">@Id</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// indique à Hibernate que ce champ est la clé primaire qui identifie de manière unique chaque ligne en base, là encore c'est obligatoire</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token annotation punctuation" style="color:#393A34">@GeneratedValue</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">strategy </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token class-name">GenerationType</span><span class="token punctuation" style="color:#393A34">.</span><span class="token constant" style="color:#36acaa">IDENTITY</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// indique que c'est le SGBD qui s'occupe de générer les identifiants</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token class-name">Long</span><span class="token plain"> id</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token class-name">String</span><span class="token plain"> name</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// le nom de la chose</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token class-name">String</span><span class="token plain"> description</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// la description de la chose</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copier le code" title="Copier" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Voilà, j'avais dit que j'allais faire simple.</p>
<p>Bon, et si nous faisions un peu de base de données&nbsp;?</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="écrivons-le-repository">Écrivons le Repository<a href="https://nathaniel-vaur-henel.github.io/blog/continue-spring#%C3%A9crivons-le-repository" class="hash-link" aria-label="Lien direct vers Écrivons le Repository" title="Lien direct vers Écrivons le Repository">​</a></h3>
<p>Le repository est la classe qui va permettre de manipuler les entités. C'est une interface qui va être implémentée par Spring Data JPA. C'est une interface, tout simplement. Spring se chargera de l'implémenter pour toi. Pas juste de l'instancier, Spring va te l'implémenter. Magique&nbsp;!</p>
<p>Et quand je dis "tout simplement"&nbsp;:</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_Ktv7">SomethingRepository.java</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">package</span><span class="token plain"> </span><span class="token namespace" style="opacity:0.7">fr</span><span class="token namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token namespace" style="opacity:0.7">nvh</span><span class="token namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token namespace" style="opacity:0.7">begin</span><span class="token namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token namespace" style="opacity:0.7">spring</span><span class="token namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token namespace" style="opacity:0.7">bag</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token import namespace" style="opacity:0.7">org</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">springframework</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">data</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">jpa</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">repository</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import class-name">JpaRepository</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token import namespace" style="opacity:0.7">org</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">springframework</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">stereotype</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import class-name">Repository</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token annotation punctuation" style="color:#393A34">@Repository</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// indique que cette interface est un bean Spring de type Repository</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">interface</span><span class="token plain"> </span><span class="token class-name">SomethingRepository</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">extends</span><span class="token plain"> </span><span class="token class-name">JpaRepository</span><span class="token generics punctuation" style="color:#393A34">&lt;</span><span class="token generics class-name">SomethingEntity</span><span class="token generics punctuation" style="color:#393A34">,</span><span class="token generics"> </span><span class="token generics class-name">Long</span><span class="token generics punctuation" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copier le code" title="Copier" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Et voilà. C'est une interface qui étend une autre interface. Tu n'as rien de plus à faire. Spring va te générer tout le code pour toi grâce à l'interface <code>JpaRepository</code>. Je t'avais dit que Spring était magique&nbsp;!</p>
<p>Le <code>@Repository</code> est une annotation Spring qui indique que cette interface est un bean Spring de type Repository. Et hop, notre premier grain de café dans le sac.</p>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>remarque</div><div class="admonitionContent_BuS1"><p>Spring est même encore plus magique. Tu peux créer des méthodes en respectant une <a href="https://docs.spring.io/spring-data/jpa/reference/jpa/query-methods.html" target="_blank" rel="noopener noreferrer">certaine nomenclature</a>, et Spring va générer les requêtes SQL pour toi. Ce n'est même de la magie à ce niveau-là, c'est un miracle. Je t'en parlerai un autre jour. Ou dans un <a href="https://nathaniel-vaur-henel.github.io/devento">Devento</a>.</p><p>Il existe plusieurs types de repository qui contient des méthodes prédéfinies. Là, j'ai pris <code>JpaRepository</code>, le plus complet et le plus simple à utiliser.</p></div></div>
<p>Allez, nous allons quand même tester tout ça. Est-ce que tu te souviens de <a href="https://www.h2database.com/html/main.html" target="_blank" rel="noopener noreferrer">H2 Database</a>&nbsp;? C'est le moment de le faire fonctionner.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="testons-notre-entité-et-son-repository">Testons notre entité et son repository<a href="https://nathaniel-vaur-henel.github.io/blog/continue-spring#testons-notre-entit%C3%A9-et-son-repository" class="hash-link" aria-label="Lien direct vers Testons notre entité et son repository" title="Lien direct vers Testons notre entité et son repository">​</a></h3>
<p>Rien de plus important qu'un feedback régulier. Je te conseille d'avancer pas à pas et de tester à chaque étape. Comme les tests unitaires ne sont pas le sujet de cet article, je vais te montrer une astuce&nbsp;: le context Spring.</p>
<p>Va dans ta classe principale, celle qui a le <code>@SpringBootApplication</code>, modifie la comme ceci&nbsp;:</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_Ktv7">DebuteAvecSpringApplication.java</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">package</span><span class="token plain"> </span><span class="token namespace" style="opacity:0.7">fr</span><span class="token namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token namespace" style="opacity:0.7">nvh</span><span class="token namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token namespace" style="opacity:0.7">begin</span><span class="token namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token namespace" style="opacity:0.7">spring</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token import namespace" style="opacity:0.7">fr</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">nvh</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">begin</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">spring</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">bag</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import class-name">SomethingEntity</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token import namespace" style="opacity:0.7">fr</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">nvh</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">begin</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">spring</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">bag</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import class-name">SomethingRepository</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token import namespace" style="opacity:0.7">org</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">springframework</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">boot</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import class-name">SpringApplication</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token import namespace" style="opacity:0.7">org</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">springframework</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">boot</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">autoconfigure</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import class-name">SpringBootApplication</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token import namespace" style="opacity:0.7">org</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">springframework</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">context</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import class-name">ConfigurableApplicationContext</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token annotation punctuation" style="color:#393A34">@SpringBootApplication</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">DebuteAvecSpringApplication</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">static</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">main</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">String</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> args</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token class-name">ConfigurableApplicationContext</span><span class="token plain"> context </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token class-name">SpringApplication</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">run</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">DebuteAvecSpringApplication</span><span class="token punctuation" style="color:#393A34">.</span><span class="token keyword" style="color:#00009f">class</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> args</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token class-name">SomethingRepository</span><span class="token plain"> repository </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> context</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getBean</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">SomethingRepository</span><span class="token punctuation" style="color:#393A34">.</span><span class="token keyword" style="color:#00009f">class</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// Création d'une instance de SomethingEntity</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token class-name">SomethingEntity</span><span class="token plain"> myFirstThing </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">SomethingEntity</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        myFirstThing</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">setName</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"My first thing"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        myFirstThing</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">setDescription</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"This is my first thing"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// Affichage dans la console pour voir ce qu'elle contient</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token class-name">System</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">out</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">println</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"not saved thing = "</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> myFirstThing</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// Sauvegarde en base de données</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token class-name">SomethingEntity</span><span class="token plain"> save </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> repository</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">save</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">myFirstThing</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// Affichage à nouveau dans la console pour voir ce qu'elle contient</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token class-name">System</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">out</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">println</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"saved thing = "</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> myFirstThing</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// Récupération de la chose de la base de données pour vérifier qu'elle a bien été sauvegardée</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        repository</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">findById</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">save</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getId</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">ifPresent</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">thing </span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain"> </span><span class="token class-name">System</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">out</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">println</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"read thing = "</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> thing</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// Affichage de toutes les choses en base de données</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token class-name">System</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">out</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">println</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"All things : "</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        repository</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">findAll</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">forEach</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">thing </span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain"> </span><span class="token class-name">System</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">out</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">println</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">" - "</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> thing</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copier le code" title="Copier" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Dans la console, après les logs Spring, tu vas voir apparaître nos <code>System.out.println</code>&nbsp;:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">not saved thing = SomethingEntity(id=null, name=My first thing, description=This is my first thing)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">saved thing = SomethingEntity(id=1, name=My first thing, description=This is my first thing)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">read thing = SomethingEntity(id=1, name=My first thing, description=This is my first thing)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">All things : </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> - SomethingEntity(id=1, name=My first thing, description=This is my first thing)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copier le code" title="Copier" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Tu as créé une entité, tu l'as sauvegardée, tu l'as lue, et tu as affiché toutes les entités. C'est tout. C'est magique. C'est Spring.</p>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>remarque</div><div class="admonitionContent_BuS1"><p>Avant la sauvegarde, l'entité n'avait pas d'identifiant. Après la sauvegarde, elle en a un. C'est Spring et Hibernate qui s'en sont occupé. Magique, encore et toujours&nbsp;!</p></div></div>
<div class="theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>attention</div><div class="admonitionContent_BuS1"><p>N'utilise jamais <code>System.out.println</code> en projet. C'est juste pour te montrer que ça marche et nous simplifier les logs&nbsp;! En projet, même perso, tu utiliseras un vrai logger. J'y reviendrai dans un autre article. Encore.</p></div></div>
<p>Tu veux vérifier ta base de données&nbsp;? Lance ton serveur et va sur <a href="http://localhost:8080/h2-console" target="_blank" rel="noopener noreferrer">http://localhost:8080/h2-console</a>. Connecte-toi en utilisant les paramètres indiqués dans tes logs. Tu trouveras toutes les infos dans mon article précédent, dans la partie <a href="http://localhost:3000/blog/begin-spring#lancement-de-lapplication-du-projet-g%C3%A9n%C3%A9r%C3%A9" target="_blank" rel="noopener noreferrer">Lancement de l'application du projet généré</a>, sous partie des logs.
<em>Abracadabra&nbsp;!</em> Tu devrais voir ta table <code>SOMETHING_ENTITY</code> et les données que tu as insérées.</p>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>L'astuce de ton dev sensei</div><div class="admonitionContent_BuS1"><p>La JDBC URL change à chaque démarrage de l'application. Tu peux la trouver dans les logs de ton application. Tu peux aussi la changer dans le fichier <code>application.properties</code> de ton projet. Ajoute la ligne <code>spring.datasource.url=jdbc:h2:mem:mydb</code> pour avoir toujours la même URL.</p></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="écrivons-le-dto">Écrivons le DTO<a href="https://nathaniel-vaur-henel.github.io/blog/continue-spring#%C3%A9crivons-le-dto" class="hash-link" aria-label="Lien direct vers Écrivons le DTO" title="Lien direct vers Écrivons le DTO">​</a></h3>
<p>Le DTO est la classe qui va permettre de faire le lien entre l'entité et le controller. C'est un simple objet, avec des attributs, des getters et des setters. C'est tout. Il s'agit d'une classe Java, rien de plus. Comme l'entité, mais sans les annotations JPA.</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_Ktv7">SomethingDto.java</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">package</span><span class="token plain"> </span><span class="token namespace" style="opacity:0.7">fr</span><span class="token namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token namespace" style="opacity:0.7">nvh</span><span class="token namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token namespace" style="opacity:0.7">begin</span><span class="token namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token namespace" style="opacity:0.7">spring</span><span class="token namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token namespace" style="opacity:0.7">bag</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token import namespace" style="opacity:0.7">lombok</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import class-name">Getter</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token import namespace" style="opacity:0.7">lombok</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import class-name">Setter</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token import namespace" style="opacity:0.7">lombok</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import class-name">ToString</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token annotation punctuation" style="color:#393A34">@Getter</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// Lombok : génère automatiquement les getters</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token annotation punctuation" style="color:#393A34">@Setter</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// Lombok : génère automatiquement les setters</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token annotation punctuation" style="color:#393A34">@ToString</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// Lombok : génère automatiquement la méthode toString</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">SomethingDto</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token class-name">Long</span><span class="token plain"> id</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token class-name">String</span><span class="token plain"> name</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token class-name">String</span><span class="token plain"> description</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copier le code" title="Copier" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="écrivons-le-mapper">Écrivons le Mapper<a href="https://nathaniel-vaur-henel.github.io/blog/continue-spring#%C3%A9crivons-le-mapper" class="hash-link" aria-label="Lien direct vers Écrivons le Mapper" title="Lien direct vers Écrivons le Mapper">​</a></h3>
<p>Le mapper est la classe qui va permettre de faire le lien entre l'entité et le DTO. C'est une classe, avec des méthodes, qui vont permettre de convertir une entité en DTO et un DTO en entité. Du coup, nous allons créer deux méthodes, une pour chaque sens.</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_Ktv7">SomethingMapper.java</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">package</span><span class="token plain"> </span><span class="token namespace" style="opacity:0.7">fr</span><span class="token namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token namespace" style="opacity:0.7">nvh</span><span class="token namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token namespace" style="opacity:0.7">begin</span><span class="token namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token namespace" style="opacity:0.7">spring</span><span class="token namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token namespace" style="opacity:0.7">bag</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token import namespace" style="opacity:0.7">org</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">springframework</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">stereotype</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import class-name">Component</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token annotation punctuation" style="color:#393A34">@Component</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// indique que cette classe est un bean Spring de type Component</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">SomethingMapper</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token class-name">SomethingDto</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">toDto</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">SomethingEntity</span><span class="token plain"> entity</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">entity </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token class-name">SomethingDto</span><span class="token plain"> dto </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">SomethingDto</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        dto</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">setId</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">entity</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getId</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        dto</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">setName</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">entity</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getName</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        dto</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">setDescription</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">entity</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getDescription</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> dto</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token class-name">SomethingEntity</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">toEntity</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">SomethingDto</span><span class="token plain"> dto</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">dto </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token class-name">SomethingEntity</span><span class="token plain"> entity </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">SomethingEntity</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        entity</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">setId</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">dto</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getId</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        entity</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">setName</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">dto</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getName</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        entity</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">setDescription</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">dto</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getDescription</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> entity</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copier le code" title="Copier" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Cette classe est un <code>@Component</code>, c'est-à-dire un bean Spring. Un autre grain de café dans le sac de Spring.</p>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_BuS1"><p>Tu as des librairies qui te permettent de fare des mappers à grands coups... d'annotations&nbsp;! Par exemple, <a href="https://mapstruct.org/" target="_blank" rel="noopener noreferrer">MapStruct</a>. Mais je te conseille de commencer par faire tes mappers à la main. C'est plus simple, et ça te permet de comprendre ce que tu fais. Tu pourras toujours utiliser MapStruct plus tard.</p></div></div>
<p>Allez, testons ce mapper&nbsp;! Reprends la classe <code>DebuteAvecSpringApplication</code> et modifie-la comme ceci&nbsp;:</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_Ktv7">DebuteAvecSpringApplication.java</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">package</span><span class="token plain"> </span><span class="token namespace" style="opacity:0.7">fr</span><span class="token namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token namespace" style="opacity:0.7">nvh</span><span class="token namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token namespace" style="opacity:0.7">begin</span><span class="token namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token namespace" style="opacity:0.7">spring</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token import namespace" style="opacity:0.7">fr</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">nvh</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">begin</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">spring</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">bag</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import class-name">SomethingDto</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token import namespace" style="opacity:0.7">fr</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">nvh</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">begin</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">spring</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">bag</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import class-name">SomethingEntity</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token import namespace" style="opacity:0.7">fr</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">nvh</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">begin</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">spring</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">bag</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import class-name">SomethingMapper</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token import namespace" style="opacity:0.7">fr</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">nvh</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">begin</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">spring</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">bag</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import class-name">SomethingRepository</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token import namespace" style="opacity:0.7">org</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">springframework</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">boot</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import class-name">SpringApplication</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token import namespace" style="opacity:0.7">org</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">springframework</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">boot</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">autoconfigure</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import class-name">SpringBootApplication</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token import namespace" style="opacity:0.7">org</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">springframework</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">context</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import class-name">ConfigurableApplicationContext</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token annotation punctuation" style="color:#393A34">@SpringBootApplication</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">DebuteAvecSpringApplication</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">static</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">main</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">String</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> args</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token class-name">ConfigurableApplicationContext</span><span class="token plain"> context </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token class-name">SpringApplication</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">run</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">DebuteAvecSpringApplication</span><span class="token punctuation" style="color:#393A34">.</span><span class="token keyword" style="color:#00009f">class</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> args</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token function" style="color:#d73a49">testRepository</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">context</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token function" style="color:#d73a49">testMapper</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">context</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">static</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">testMapper</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">ConfigurableApplicationContext</span><span class="token plain"> context</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token class-name">System</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">out</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">println</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"*** Test du mapper ***"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token class-name">SomethingEntity</span><span class="token plain"> entity </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">SomethingEntity</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        entity</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">setId</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1L</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// on met un id pour voir si le mapper le prend en compte</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        entity</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">setName</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"Another thing"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        entity</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">setDescription</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"This is another thing"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token class-name">System</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">out</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">println</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"not mapped entity = "</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> entity</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token class-name">SomethingMapper</span><span class="token plain"> mapper </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> context</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getBean</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">SomethingMapper</span><span class="token punctuation" style="color:#393A34">.</span><span class="token keyword" style="color:#00009f">class</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token class-name">SomethingDto</span><span class="token plain"> dto </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> mapper</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">toDto</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">entity</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token class-name">System</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">out</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">println</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"mapped DTO = "</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> dto</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token class-name">SomethingEntity</span><span class="token plain"> mappedEntity </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> mapper</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">toEntity</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">dto</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token class-name">System</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">out</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">println</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"mappedEntity = "</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> mappedEntity</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// on teste aussi les cas limites</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token class-name">System</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">out</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">println</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"toDto(null) = "</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> mapper</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">toDto</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token class-name">System</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">out</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">println</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"toEntity(null) = "</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> mapper</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">toEntity</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">static</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">testRepository</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">ConfigurableApplicationContext</span><span class="token plain"> context</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token class-name">System</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">out</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">println</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"*** Test du repository ***"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token class-name">SomethingRepository</span><span class="token plain"> repository </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> context</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getBean</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">SomethingRepository</span><span class="token punctuation" style="color:#393A34">.</span><span class="token keyword" style="color:#00009f">class</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// Création d'une instance de SomethingEntity</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token class-name">SomethingEntity</span><span class="token plain"> myFirstThing </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">SomethingEntity</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        myFirstThing</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">setName</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"My first thing"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        myFirstThing</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">setDescription</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"This is my first thing"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// on l'affiche dans la console pour voir ce qu'elle contient</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token class-name">System</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">out</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">println</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"not saved thing = "</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> myFirstThing</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// on la sauvegarde en base de données</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token class-name">SomethingEntity</span><span class="token plain"> save </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> repository</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">save</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">myFirstThing</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// on l'affiche à nouveau dans la console pour voir ce qu'elle contient</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token class-name">System</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">out</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">println</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"saved thing = "</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> myFirstThing</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// on la récupère de la base de données pour vérifier qu'elle a bien été sauvegardée</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        repository</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">findById</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">save</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getId</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">ifPresent</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">thing </span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain"> </span><span class="token class-name">System</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">out</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">println</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"read thing = "</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> thing</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// on affiche toutes les choses en base de données</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token class-name">System</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">out</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">println</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"All things : "</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        repository</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">findAll</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">forEach</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">thing </span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain"> </span><span class="token class-name">System</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">out</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">println</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">" - "</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> thing</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copier le code" title="Copier" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Oui, j'ai réécrit le code. Ce sera plus simple à lire. Il est recommandé de faire des petites méthodes qui font une seule chose. Je pourrais faire un article là-dessus...</p>
<p>Alors, maintenant, lance ton application. Tu devrais voir apparaître dans la console&nbsp;:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">*** Test du repository ***</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">not saved thing = SomethingEntity(id=null, name=My first thing, description=This is my first thing)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">saved thing = SomethingEntity(id=1, name=My first thing, description=This is my first thing)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">read thing = SomethingEntity(id=1, name=My first thing, description=This is my first thing)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">All things : </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> - SomethingEntity(id=1, name=My first thing, description=This is my first thing)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">*** Test du mapper ***</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">not mapped entity = SomethingEntity(id=1, name=Another thing, description=This is another thing)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">mapped DTO = SomethingDto(id=1, name=Another thing, description=This is another thing)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">mappedEntity = SomethingEntity(id=1, name=Another thing, description=This is another thing)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">toDto(null) = null</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">toEntity(null) = null</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copier le code" title="Copier" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>La première partie <code>*** Test du repository ***</code> est déjà connue, je l'ai juste mise en forme afin qu'on la voie bien dans les logs. La deuxième partie <code>*** Test du mapper ***</code> est nouvelle. Tu as créé une entité, tu l'as transformée en DTO, tu as transformé ce DTO en entité, et tu as testé les cas limites. Quand tu testes, tu testes tout&nbsp;: les cas normaux, les cas limites, les cas d'erreurs. Tu sais quoi&nbsp;? Je t'en parlerai dans un autre article. Ou dans un <a href="https://nathaniel-vaur-henel.github.io/devento">Devento</a>.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="écrivons-le-controller">Écrivons le Controller<a href="https://nathaniel-vaur-henel.github.io/blog/continue-spring#%C3%A9crivons-le-controller" class="hash-link" aria-label="Lien direct vers Écrivons le Controller" title="Lien direct vers Écrivons le Controller">​</a></h3>
<p>Comme je te l'ai dit, le controller va nous permettre de faire le lien entre l'application et l'extérieur. Tu déclares des méthodes avec des tas d'annotations, et Spring va s'occuper de tout. C'est magique.</p>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>L'astuce de ton dev sensei</div><div class="admonitionContent_BuS1"><p>Je te conseille de faire un endpoint après l'autre. C'est plus simple pour tester et pour comprendre. Et du coup, un use case après l'autre. Et n'oublie d'écrire le code que je te présente, ne le copie-colle pas si tu veux commencer à le retenir.</p></div></div>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_Ktv7">SomethingController.java</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">package</span><span class="token plain"> </span><span class="token namespace" style="opacity:0.7">fr</span><span class="token namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token namespace" style="opacity:0.7">nvh</span><span class="token namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token namespace" style="opacity:0.7">begin</span><span class="token namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token namespace" style="opacity:0.7">spring</span><span class="token namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token namespace" style="opacity:0.7">bag</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token import namespace" style="opacity:0.7">fr</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">nvh</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">begin</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">spring</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">bag</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">use</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">cases</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import class-name">SomethingCreateUseCase</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token import namespace" style="opacity:0.7">fr</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">nvh</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">begin</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">spring</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">bag</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">use</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">cases</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import class-name">SomethingDeleteUseCase</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token import namespace" style="opacity:0.7">fr</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">nvh</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">begin</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">spring</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">bag</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">use</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">cases</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import class-name">SomethingFindAllUseCase</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token import namespace" style="opacity:0.7">fr</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">nvh</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">begin</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">spring</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">bag</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">use</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">cases</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import class-name">SomethingFindByIdUseCase</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token import namespace" style="opacity:0.7">fr</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">nvh</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">begin</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">spring</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">bag</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">use</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">cases</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import class-name">SomethingUpdateUseCase</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token import namespace" style="opacity:0.7">lombok</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import class-name">RequiredArgsConstructor</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token import namespace" style="opacity:0.7">lombok</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">extern</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">slf4j</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import class-name">Slf4j</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token import namespace" style="opacity:0.7">org</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">springframework</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">http</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import class-name">HttpStatus</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token import namespace" style="opacity:0.7">org</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">springframework</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">web</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">bind</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">annotation</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import class-name">DeleteMapping</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token import namespace" style="opacity:0.7">org</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">springframework</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">web</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">bind</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">annotation</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import class-name">GetMapping</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token import namespace" style="opacity:0.7">org</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">springframework</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">web</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">bind</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">annotation</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import class-name">PathVariable</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token import namespace" style="opacity:0.7">org</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">springframework</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">web</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">bind</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">annotation</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import class-name">PostMapping</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token import namespace" style="opacity:0.7">org</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">springframework</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">web</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">bind</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">annotation</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import class-name">PutMapping</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token import namespace" style="opacity:0.7">org</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">springframework</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">web</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">bind</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">annotation</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import class-name">RequestBody</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token import namespace" style="opacity:0.7">org</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">springframework</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">web</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">bind</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">annotation</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import class-name">RequestMapping</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token import namespace" style="opacity:0.7">org</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">springframework</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">web</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">bind</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">annotation</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import class-name">ResponseStatus</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token import namespace" style="opacity:0.7">org</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">springframework</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">web</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">bind</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">annotation</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import class-name">RestController</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token import namespace" style="opacity:0.7">java</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">util</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import class-name">List</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token annotation punctuation" style="color:#393A34">@Slf4j</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// Lombok : génère automatiquement un logger</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token annotation punctuation" style="color:#393A34">@RequiredArgsConstructor</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// Lombok : génère automatiquement un constructeur avec tous les champs en paramètres. Cela permet d'injecter les dépendances dans le contrôleur.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token annotation punctuation" style="color:#393A34">@RestController</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// indique que cette classe est un bean Spring de type Controller</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token annotation punctuation" style="color:#393A34">@RequestMapping</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"/api/something"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// indique que toutes les méthodes de cette classe sont accessibles via l'URL /api/something</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">SomethingController</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// tous les use cases dont nous avons besoin, un par action</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">final</span><span class="token plain"> </span><span class="token class-name">SomethingCreateUseCase</span><span class="token plain"> somethingCreateUseCase</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">final</span><span class="token plain"> </span><span class="token class-name">SomethingFindAllUseCase</span><span class="token plain"> somethingFindAllUseCase</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">final</span><span class="token plain"> </span><span class="token class-name">SomethingFindByIdUseCase</span><span class="token plain"> somethingFindByIdUseCase</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">final</span><span class="token plain"> </span><span class="token class-name">SomethingUpdateUseCase</span><span class="token plain"> somethingUpdateUseCase</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">final</span><span class="token plain"> </span><span class="token class-name">SomethingDeleteUseCase</span><span class="token plain"> somethingDeleteUseCase</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token annotation punctuation" style="color:#393A34">@ResponseStatus</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">HttpStatus</span><span class="token punctuation" style="color:#393A34">.</span><span class="token constant" style="color:#36acaa">CREATED</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token annotation punctuation" style="color:#393A34">@PostMapping</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token class-name">SomethingDto</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">create</span><span class="token punctuation" style="color:#393A34">(</span><span class="token annotation punctuation" style="color:#393A34">@RequestBody</span><span class="token plain"> </span><span class="token class-name">SomethingDto</span><span class="token plain"> somethingDto</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// le paramètre somethingDto est récupéré dans le corps de la requête</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        log</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">info</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"POST /api/something {}"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> somethingDto</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> somethingCreateUseCase</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">create</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">somethingDto</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token annotation punctuation" style="color:#393A34">@ResponseStatus</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">HttpStatus</span><span class="token punctuation" style="color:#393A34">.</span><span class="token constant" style="color:#36acaa">OK</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// indique que la méthode retourne un code HTTP 200</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token annotation punctuation" style="color:#393A34">@GetMapping</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// indique que cette méthode est accessible via une requête HTTP GET</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token class-name">List</span><span class="token generics punctuation" style="color:#393A34">&lt;</span><span class="token generics class-name">SomethingDto</span><span class="token generics punctuation" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">findAll</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        log</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">info</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"GET /api/something"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// log pour voir ce qui se passe dans la console</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> somethingFindAllUseCase</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">findAll</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// appel du use case</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token annotation punctuation" style="color:#393A34">@ResponseStatus</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">HttpStatus</span><span class="token punctuation" style="color:#393A34">.</span><span class="token constant" style="color:#36acaa">OK</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token annotation punctuation" style="color:#393A34">@GetMapping</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"/{id}"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token class-name">SomethingDto</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">findById</span><span class="token punctuation" style="color:#393A34">(</span><span class="token annotation punctuation" style="color:#393A34">@PathVariable</span><span class="token plain"> </span><span class="token class-name">Long</span><span class="token plain"> id</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// le paramètre id est récupéré dans l'URL</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        log</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">info</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"GET /api/something/{}"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> id</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> somethingFindByIdUseCase</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">findById</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">id</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token annotation punctuation" style="color:#393A34">@ResponseStatus</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">HttpStatus</span><span class="token punctuation" style="color:#393A34">.</span><span class="token constant" style="color:#36acaa">OK</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token annotation punctuation" style="color:#393A34">@PutMapping</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"/{id}"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token class-name">SomethingDto</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">update</span><span class="token punctuation" style="color:#393A34">(</span><span class="token annotation punctuation" style="color:#393A34">@PathVariable</span><span class="token plain"> </span><span class="token class-name">Long</span><span class="token plain"> id</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token annotation punctuation" style="color:#393A34">@RequestBody</span><span class="token plain"> </span><span class="token class-name">SomethingDto</span><span class="token plain"> somethingDto</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        log</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">info</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"PUT /api/something/{} {}"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> id</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> somethingDto</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> somethingUpdateUseCase</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">update</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">id</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> somethingDto</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token annotation punctuation" style="color:#393A34">@ResponseStatus</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">HttpStatus</span><span class="token punctuation" style="color:#393A34">.</span><span class="token constant" style="color:#36acaa">NO_CONTENT</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token annotation punctuation" style="color:#393A34">@DeleteMapping</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"/{id}"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">delete</span><span class="token punctuation" style="color:#393A34">(</span><span class="token annotation punctuation" style="color:#393A34">@PathVariable</span><span class="token plain"> </span><span class="token class-name">Long</span><span class="token plain"> id</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        log</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">info</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"DELETE /api/something/{}"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> id</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        somethingDeleteUseCase</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">delete</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">id</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copier le code" title="Copier" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Voilà un controller très classique. Quand tu mets @RestController, Spring va s'occuper de tout. Tu n'as pas besoin de faire de <code>@ResponseBody</code> ou de <code>@RequestBody</code>. C'est magique. Et par défaut il te renvoie une réponse <code>HTTP 200</code>. Comme j'ai voulu des réponses différentes, j'ai mis des <code>@ResponseStatus</code> partout, y compris pour les <code>HTTP 200</code>. C'est une question de cohérence.</p>
<p>Spring s'occupe aussi de la désérialisation et de la sérialisation des différents paramètres. Tu as plusieurs annotations pour indiquer à Spring où il doit lire la donnée&nbsp;:</p>
<ul>
<li><code>@PathVariable</code> pour les paramètres dans l'URL.</li>
<li><code>@RequestParam</code> pour les paramètres dans la requête</li>
<li><code>@RequestBody</code> pour les paramètres dans le corps de la requête, par défaut en JSON.</li>
</ul>
<p>Il y en a d'autres, mais celles-ci sont les plus courantes.</p>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>remarque</div><div class="admonitionContent_BuS1"><p>Dans un autre article, je te montrerai comment passer des paramètres pour, par exemple, trier ou paginer les résultats, pour faire des recherches ou des filtres.</p></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="écrivons-les-use-cases">Écrivons les Use Cases<a href="https://nathaniel-vaur-henel.github.io/blog/continue-spring#%C3%A9crivons-les-use-cases" class="hash-link" aria-label="Lien direct vers Écrivons les Use Cases" title="Lien direct vers Écrivons les Use Cases">​</a></h3>
<p>Passons à la partie métier. J'ai dit un <code>UseCase</code> par action. Ils vont être très simples&nbsp;: ils vont appeler le <code>Repository</code> et le <code>Mapper</code> si besoin. C'est tout.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="1-le-use-case-pour-créer-une-chose">1. Le Use Case pour créer une chose<a href="https://nathaniel-vaur-henel.github.io/blog/continue-spring#1-le-use-case-pour-cr%C3%A9er-une-chose" class="hash-link" aria-label="Lien direct vers 1. Le Use Case pour créer une chose" title="Lien direct vers 1. Le Use Case pour créer une chose">​</a></h4>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_Ktv7">SomethingCreateUseCase.java</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">package</span><span class="token plain"> </span><span class="token namespace" style="opacity:0.7">fr</span><span class="token namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token namespace" style="opacity:0.7">nvh</span><span class="token namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token namespace" style="opacity:0.7">begin</span><span class="token namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token namespace" style="opacity:0.7">spring</span><span class="token namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token namespace" style="opacity:0.7">bag</span><span class="token namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token namespace" style="opacity:0.7">use</span><span class="token namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token namespace" style="opacity:0.7">cases</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token import namespace" style="opacity:0.7">fr</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">nvh</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">begin</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">spring</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">bag</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import class-name">SomethingDto</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token import namespace" style="opacity:0.7">fr</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">nvh</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">begin</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">spring</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">bag</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import class-name">SomethingEntity</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token import namespace" style="opacity:0.7">fr</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">nvh</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">begin</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">spring</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">bag</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import class-name">SomethingMapper</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token import namespace" style="opacity:0.7">fr</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">nvh</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">begin</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">spring</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">bag</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import class-name">SomethingRepository</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token import namespace" style="opacity:0.7">lombok</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import class-name">RequiredArgsConstructor</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token import namespace" style="opacity:0.7">org</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">springframework</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">stereotype</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import class-name">Component</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token annotation punctuation" style="color:#393A34">@RequiredArgsConstructor</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token annotation punctuation" style="color:#393A34">@Component</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">SomethingCreateUseCase</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">final</span><span class="token plain"> </span><span class="token class-name">SomethingRepository</span><span class="token plain"> repository</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">final</span><span class="token plain"> </span><span class="token class-name">SomethingMapper</span><span class="token plain"> mapper</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token class-name">SomethingDto</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">create</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">SomethingDto</span><span class="token plain"> somethingDto</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token class-name">SomethingEntity</span><span class="token plain"> entity </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> mapper</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">toEntity</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">somethingDto</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token class-name">SomethingEntity</span><span class="token plain"> saved </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> repository</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">save</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">entity</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> mapper</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">toDto</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">saved</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copier le code" title="Copier" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="2-le-use-case-pour-lire-toutes-les-choses">2. Le Use Case pour lire toutes les choses<a href="https://nathaniel-vaur-henel.github.io/blog/continue-spring#2-le-use-case-pour-lire-toutes-les-choses" class="hash-link" aria-label="Lien direct vers 2. Le Use Case pour lire toutes les choses" title="Lien direct vers 2. Le Use Case pour lire toutes les choses">​</a></h4>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_Ktv7">SomethingFindAllUseCase.java</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">package</span><span class="token plain"> </span><span class="token namespace" style="opacity:0.7">fr</span><span class="token namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token namespace" style="opacity:0.7">nvh</span><span class="token namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token namespace" style="opacity:0.7">begin</span><span class="token namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token namespace" style="opacity:0.7">spring</span><span class="token namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token namespace" style="opacity:0.7">bag</span><span class="token namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token namespace" style="opacity:0.7">use</span><span class="token namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token namespace" style="opacity:0.7">cases</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token import namespace" style="opacity:0.7">fr</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">nvh</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">begin</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">spring</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">bag</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import class-name">SomethingDto</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token import namespace" style="opacity:0.7">fr</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">nvh</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">begin</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">spring</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">bag</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import class-name">SomethingMapper</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token import namespace" style="opacity:0.7">fr</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">nvh</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">begin</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">spring</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">bag</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import class-name">SomethingRepository</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token import namespace" style="opacity:0.7">lombok</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import class-name">RequiredArgsConstructor</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token import namespace" style="opacity:0.7">org</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">springframework</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">stereotype</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import class-name">Component</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token import namespace" style="opacity:0.7">java</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">util</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import class-name">List</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token annotation punctuation" style="color:#393A34">@RequiredArgsConstructor</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token annotation punctuation" style="color:#393A34">@Component</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">SomethingFindAllUseCase</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">final</span><span class="token plain"> </span><span class="token class-name">SomethingRepository</span><span class="token plain"> repository</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">final</span><span class="token plain"> </span><span class="token class-name">SomethingMapper</span><span class="token plain"> mapper</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token class-name">List</span><span class="token generics punctuation" style="color:#393A34">&lt;</span><span class="token generics class-name">SomethingDto</span><span class="token generics punctuation" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">findAll</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> repository</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">findAll</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">stream</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">map</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">mapper</span><span class="token operator" style="color:#393A34">::</span><span class="token function" style="color:#d73a49">toDto</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">toList</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copier le code" title="Copier" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="3-le-use-case-pour-lire-une-chose">3. Le Use Case pour lire une chose<a href="https://nathaniel-vaur-henel.github.io/blog/continue-spring#3-le-use-case-pour-lire-une-chose" class="hash-link" aria-label="Lien direct vers 3. Le Use Case pour lire une chose" title="Lien direct vers 3. Le Use Case pour lire une chose">​</a></h4>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_Ktv7">SomethingFindByIdUseCase.java</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">package</span><span class="token plain"> </span><span class="token namespace" style="opacity:0.7">fr</span><span class="token namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token namespace" style="opacity:0.7">nvh</span><span class="token namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token namespace" style="opacity:0.7">begin</span><span class="token namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token namespace" style="opacity:0.7">spring</span><span class="token namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token namespace" style="opacity:0.7">bag</span><span class="token namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token namespace" style="opacity:0.7">use</span><span class="token namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token namespace" style="opacity:0.7">cases</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token import namespace" style="opacity:0.7">fr</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">nvh</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">begin</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">spring</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">bag</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import class-name">SomethingDto</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token import namespace" style="opacity:0.7">fr</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">nvh</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">begin</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">spring</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">bag</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import class-name">SomethingMapper</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token import namespace" style="opacity:0.7">fr</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">nvh</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">begin</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">spring</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">bag</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import class-name">SomethingRepository</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token import namespace" style="opacity:0.7">jakarta</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">persistence</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import class-name">EntityNotFoundException</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token import namespace" style="opacity:0.7">lombok</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import class-name">RequiredArgsConstructor</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token import namespace" style="opacity:0.7">org</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">springframework</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">stereotype</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import class-name">Component</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token annotation punctuation" style="color:#393A34">@RequiredArgsConstructor</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token annotation punctuation" style="color:#393A34">@Component</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">SomethingFindByIdUseCase</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">final</span><span class="token plain"> </span><span class="token class-name">SomethingRepository</span><span class="token plain"> repository</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">final</span><span class="token plain"> </span><span class="token class-name">SomethingMapper</span><span class="token plain"> mapper</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token class-name">SomethingDto</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">findById</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">Long</span><span class="token plain"> id</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> repository</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">findById</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">id</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">map</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">mapper</span><span class="token operator" style="color:#393A34">::</span><span class="token function" style="color:#d73a49">toDto</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">orElseThrow</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">EntityNotFoundException</span><span class="token operator" style="color:#393A34">::</span><span class="token keyword" style="color:#00009f">new</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copier le code" title="Copier" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="4-le-use-case-pour-modifier-une-chose">4. Le Use Case pour modifier une chose<a href="https://nathaniel-vaur-henel.github.io/blog/continue-spring#4-le-use-case-pour-modifier-une-chose" class="hash-link" aria-label="Lien direct vers 4. Le Use Case pour modifier une chose" title="Lien direct vers 4. Le Use Case pour modifier une chose">​</a></h4>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_Ktv7">SomethingUpdateUseCase.java</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">package</span><span class="token plain"> </span><span class="token namespace" style="opacity:0.7">fr</span><span class="token namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token namespace" style="opacity:0.7">nvh</span><span class="token namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token namespace" style="opacity:0.7">begin</span><span class="token namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token namespace" style="opacity:0.7">spring</span><span class="token namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token namespace" style="opacity:0.7">bag</span><span class="token namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token namespace" style="opacity:0.7">use</span><span class="token namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token namespace" style="opacity:0.7">cases</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token import namespace" style="opacity:0.7">fr</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">nvh</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">begin</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">spring</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">bag</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import class-name">SomethingDto</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token import namespace" style="opacity:0.7">fr</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">nvh</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">begin</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">spring</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">bag</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import class-name">SomethingEntity</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token import namespace" style="opacity:0.7">fr</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">nvh</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">begin</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">spring</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">bag</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import class-name">SomethingMapper</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token import namespace" style="opacity:0.7">fr</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">nvh</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">begin</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">spring</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">bag</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import class-name">SomethingRepository</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token import namespace" style="opacity:0.7">lombok</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import class-name">RequiredArgsConstructor</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token import namespace" style="opacity:0.7">org</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">springframework</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">stereotype</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import class-name">Component</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token annotation punctuation" style="color:#393A34">@RequiredArgsConstructor</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token annotation punctuation" style="color:#393A34">@Component</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">SomethingUpdateUseCase</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">final</span><span class="token plain"> </span><span class="token class-name">SomethingRepository</span><span class="token plain"> repository</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">final</span><span class="token plain"> </span><span class="token class-name">SomethingMapper</span><span class="token plain"> mapper</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token class-name">SomethingDto</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">update</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">Long</span><span class="token plain"> id</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token class-name">SomethingDto</span><span class="token plain"> somethingDto</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        somethingDto</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">setId</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">id</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token class-name">SomethingEntity</span><span class="token plain"> entity </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> mapper</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">toEntity</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">somethingDto</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token class-name">SomethingEntity</span><span class="token plain"> saved </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> repository</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">save</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">entity</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> mapper</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">toDto</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">saved</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copier le code" title="Copier" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="5-le-use-case-pour-supprimer-une-chose">5. Le Use Case pour supprimer une chose<a href="https://nathaniel-vaur-henel.github.io/blog/continue-spring#5-le-use-case-pour-supprimer-une-chose" class="hash-link" aria-label="Lien direct vers 5. Le Use Case pour supprimer une chose" title="Lien direct vers 5. Le Use Case pour supprimer une chose">​</a></h4>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_Ktv7">SomethingDeleteUseCase.java</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">package</span><span class="token plain"> </span><span class="token namespace" style="opacity:0.7">fr</span><span class="token namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token namespace" style="opacity:0.7">nvh</span><span class="token namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token namespace" style="opacity:0.7">begin</span><span class="token namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token namespace" style="opacity:0.7">spring</span><span class="token namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token namespace" style="opacity:0.7">bag</span><span class="token namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token namespace" style="opacity:0.7">use</span><span class="token namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token namespace" style="opacity:0.7">cases</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token import namespace" style="opacity:0.7">fr</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">nvh</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">begin</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">spring</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">bag</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import class-name">SomethingRepository</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token import namespace" style="opacity:0.7">lombok</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import class-name">RequiredArgsConstructor</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token import namespace" style="opacity:0.7">org</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">springframework</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">stereotype</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import class-name">Component</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token annotation punctuation" style="color:#393A34">@RequiredArgsConstructor</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token annotation punctuation" style="color:#393A34">@Component</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">SomethingDeleteUseCase</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">final</span><span class="token plain"> </span><span class="token class-name">SomethingRepository</span><span class="token plain"> repository</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">delete</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">Long</span><span class="token plain"> id</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        repository</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">deleteById</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">id</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copier le code" title="Copier" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="testons-notre-application">Testons notre application<a href="https://nathaniel-vaur-henel.github.io/blog/continue-spring#testons-notre-application" class="hash-link" aria-label="Lien direct vers Testons notre application" title="Lien direct vers Testons notre application">​</a></h3>
<p>Tu peux utiliser <a href="https://www.postman.com/" target="_blank" rel="noopener noreferrer">Postman</a> ou <a href="https://insomnia.rest/" target="_blank" rel="noopener noreferrer">Insomnia</a> pour tester tes endpoints. Tu peux aussi utiliser <a href="https://curl.se/" target="_blank" rel="noopener noreferrer">curl</a> ou <a href="https://httpie.io/" target="_blank" rel="noopener noreferrer">httpie</a>. Ou alors, tu peux utiliser un navigateur. C'est plus simple pour les <code>GET</code>.</p>
<p>Je te laisse tester tout ça tout seul, car le billet est déjà assez long comme ça. J'écrirai bientôt un article afin de filtrer, de trier, de paginer et dans lequel je te montrerai aussi comment utiliser un logiciel dédié comme ceux mentionnés ci-dessus.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="pour-aller-plus-loin">Pour aller plus loin<a href="https://nathaniel-vaur-henel.github.io/blog/continue-spring#pour-aller-plus-loin" class="hash-link" aria-label="Lien direct vers Pour aller plus loin" title="Lien direct vers Pour aller plus loin">​</a></h2>
<p>Voici quelques liens pour approfondir les sujets abordés dans cet article en attendant le prochain article&nbsp;!</p>
<ul>
<li>Wikipedia&nbsp;:<!-- -->
<ul>
<li><a href="https://fr.wikipedia.org/wiki/Programmation_orient%C3%A9e_objet" target="_blank" rel="noopener noreferrer">Programmation Orientée Objet</a>,</li>
<li><a href="https://fr.wikipedia.org/wiki/Hypertext_Transfer_Protocol#M%C3%A9thodes" target="_blank" rel="noopener noreferrer">Les verbes, ou méthodes, HTTP</a></li>
<li><a href="https://fr.wikipedia.org/wiki/Representational_state_transfer" target="_blank" rel="noopener noreferrer">REST</a></li>
<li><a href="https://fr.wikipedia.org/wiki/Objet_de_transfert_de_donn%C3%A9es" target="_blank" rel="noopener noreferrer">Data Transfer Object</a></li>
<li><a href="https://en.wikipedia.org/wiki/Endpoint_interface" target="_blank" rel="noopener noreferrer">Endpoint</a></li>
<li><a href="https://fr.wikipedia.org/wiki/S%C3%A9rialisation" target="_blank" rel="noopener noreferrer">La sérialisation</a></li>
<li><a href="https://en.wikipedia.org/wiki/Jackson_(API)" target="_blank" rel="noopener noreferrer">Jackson</a></li>
</ul>
</li>
<li>Les sites officiels&nbsp;:<!-- -->
<ul>
<li><a href="https://www.h2database.com/html/main.html" target="_blank" rel="noopener noreferrer">H2 Database</a></li>
<li><a href="https://projectlombok.org/" target="_blank" rel="noopener noreferrer">Lombok</a></li>
<li><a href="https://mapstruct.org/" target="_blank" rel="noopener noreferrer">MapStruct</a></li>
<li><a href="https://hibernate.org/" target="_blank" rel="noopener noreferrer">Hibernate</a></li>
</ul>
</li>
<li>Baeldung&nbsp;:<!-- -->
<ul>
<li><a href="https://www.baeldung.com/rest-with-spring-series" target="_blank" rel="noopener noreferrer">REST with Spring Tutorial</a></li>
<li><a href="https://www.baeldung.com/spring-controller-vs-restcontroller" target="_blank" rel="noopener noreferrer">The Spring @Controller and @RestController Annotations</a></li>
<li><a href="https://www.baeldung.com/spring-pathvariable" target="_blank" rel="noopener noreferrer">Spring @PathVariable Annotation</a>
<a href="https://www.baeldung.com/spring-request-param" target="_blank" rel="noopener noreferrer">Spring @RequestParam Annotation</a>
<a href="https://www.baeldung.com/spring-requestmapping" target="_blank" rel="noopener noreferrer">Spring @RequestMapping</a></li>
<li><a href="https://www.baeldung.com/learn-jpa-hibernate" target="_blank" rel="noopener noreferrer">Learn JPA &amp; Hibernate</a></li>
<li><a href="https://www.baeldung.com/jackson" target="_blank" rel="noopener noreferrer">Jackson</a></li>
<li><a href="https://www.baeldung.com/intro-to-project-lombok" target="_blank" rel="noopener noreferrer">Project Lombok</a></li>
</ul>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="conclusion">Conclusion<a href="https://nathaniel-vaur-henel.github.io/blog/continue-spring#conclusion" class="hash-link" aria-label="Lien direct vers Conclusion" title="Lien direct vers Conclusion">​</a></h2>
<p>Je t'ai expliqué une architecture simple et efficace pour faire ton application Spring.</p>
<p>Je t'ai montré du code avec beaucoup d'annotations afin de te montrer que Spring s'occupe de tout pour que tu puisses te concentrer sur ton code.</p>
<p>J'espère que tu as appris des choses. Et j'espère que tu as envie d'en apprendre encore plus. Parce que c'est pas fini. Et je te donne rendez-vous dans le prochain article pour voir comment on peut filtrer et paginer tout ça. Ou l'un des nombreux sujets à peine abordés dans cet article. Dis-moi ce que tu préfères en commentaire&nbsp;!</p>
<p>Si tu as envie que j'explique plus en avant certains concepts ou que je parle de quelque chose en particulier, n'hésite pas à me le dire dans les commentaires.</p>
<p>Pour ne pas rater les prochains articles, abonne-toi à un flux (tu as le choix entre <a href="https://nathaniel-vaur-henel.github.io/blog/rss.xml" target="_blank" rel="noopener noreferrer">RSS</a>, <a href="https://nathaniel-vaur-henel.github.io/blog/atom.xml" target="_blank" rel="noopener noreferrer">Atom</a> et <a href="https://nathaniel-vaur-henel.github.io/blog/feeed.json" target="_blank" rel="noopener noreferrer">Json</a>) ou à la newsletter en <a href="https://nathaniel-vaur-henel.github.io/">page d'accueil</a>&nbsp;!</p>
<p>Et bon entrainement&nbsp;!</p>]]></content:encoded>
            <category>Java</category>
            <category>Spring</category>
            <category>langage</category>
            <category>développement</category>
            <category>tuto</category>
        </item>
        <item>
            <title><![CDATA[Débuter avec Spring grâce à Spring Initializr]]></title>
            <link>https://nathaniel-vaur-henel.github.io/blog/begin-spring</link>
            <guid>https://nathaniel-vaur-henel.github.io/blog/begin-spring</guid>
            <pubDate>Thu, 15 Feb 2024 00:00:00 GMT</pubDate>
            <description><![CDATA[Ce n'est pas toujours facile de se lancer avec Spring quand on est un développeur Java débutant. De premier abord aride avec sa réputation de mastodonte compliqué à appréhender, Spring est pourtant un framework superstar dans la communauté java, et ce n'est pas sans raison.]]></description>
            <content:encoded><![CDATA[<p>Ce n'est pas toujours facile de se lancer avec Spring quand on est un développeur Java débutant. De premier abord aride avec sa réputation de mastodonte compliqué à appréhender, Spring est pourtant un framework superstar dans la communauté java, et ce n'est pas sans raison.<br>
<!-- -->Afin de faciliter ta prise en main de Spring, je vais te présenter comment il fonctionne et te donner les clefs qui te permettront de te lancer tout en douceur.</p>
<div class="theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>attention</div><div class="admonitionContent_BuS1"><p>Je vais considérer que tu as déjà des bases en Java. Si ce n'est pas le cas, je te conseille de commencer par là. Tu trouveras plein de ressources sur le net pour apprendre Java. J'ai toujours aimé les cours d'<a href="https://openclassrooms.com/fr/courses/6173501-apprenez-a-programmer-en-java" target="_blank" rel="noopener noreferrer">OpenClassrooms</a>, mais il y en a plein d'autres. Et tu pourras trouver quelques conseils sur ce site.</p></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="spring-un-framework-java-incontournable">Spring, un framework Java incontournable<a href="https://nathaniel-vaur-henel.github.io/blog/begin-spring#spring-un-framework-java-incontournable" class="hash-link" aria-label="Lien direct vers Spring, un framework Java incontournable" title="Lien direct vers Spring, un framework Java incontournable">​</a></h2>
<p>Spring, c'est de la magie&nbsp;: ce framework sait faire plein de choses tout seul, sans que l'on ait besoin de comprendre toutes les mécaniques sous-jacentes. Un avantage certes, mais qui peut rendre parfois son usage déroutant, voire complexe, quand le framework s'emballe et te casse ta belle appli sans que tu ne comprennes pourquoi. <a href="https://youtu.be/snB8u_G3jVI?feature=shared&amp;t=374" target="_blank" rel="noopener noreferrer">En mode les balais de Fantasia qui se mettent à danser tout seul... et inondent finalement ta baraque</a>.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="spring-le-framework-pour-tous">Spring, le framework pour tous<a href="https://nathaniel-vaur-henel.github.io/blog/begin-spring#spring-le-framework-pour-tous" class="hash-link" aria-label="Lien direct vers Spring, le framework pour tous" title="Lien direct vers Spring, le framework pour tous">​</a></h3>
<p>Spring est un framework opensource Java qui permet de développer plus rapidement des applications complexes et de qualité. Il est très populaire et très utilisé dans le monde professionnel au point où l'on peut dire qu'on ne code plus en Java, mais en Spring. C'est une véritable compétence clef qui peut ouvrir les portes de beaux projets, mais surtout en fermer si on ne le maîtrise pas suffisamment.</p>
<p>Dernièrement, j'ai abordé le sujet de Spring avec des développeurs juniors que j'accompagne. Comme ils sortent d'école et n'ont pas creusé la question de ce framework, je leur ai proposé, afin d'augmenter leurs compétences, de créer un projet perso en Spring. Leur réaction a été unanime&nbsp;:<br>
<!-- -->"C'est trop gros, trop compliqué, c'est pour des grosses applis."<br>
<!-- -->Alors... c'est pas faux. Je me souviens moi-même avoir eu des difficultés à m'y mettre lorsque je n'étais encore qu'un débutant.
Et pourtant, aujourd'hui, je ne peux plus m'en passer. Spring est devenu un outil indispensable dans mon quotidien de développeur Java.</p>
<p>Je te propose de démystifier Spring et de te montrer comment tu peux t'en servir pour créer des applications, quelles que soient la taille et l'ambition de ton projet.</p>
<p>Une fois les concepts de base assimilés, Spring est finalement facile à utiliser, à condition d'y aller doucement et d'avoir déjà quelques bases en Java. Donc go, go, go&nbsp;! Même à la maison, tu peux springer© (il faut que je le dépose ça...) à volonté.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="attention-à-ne-pas-confondre-spring-ou-spring-boot">Attention à ne pas confondre Spring ou Spring Boot<a href="https://nathaniel-vaur-henel.github.io/blog/begin-spring#attention-%C3%A0-ne-pas-confondre-spring-ou-spring-boot" class="hash-link" aria-label="Lien direct vers Attention à ne pas confondre Spring ou Spring Boot" title="Lien direct vers Attention à ne pas confondre Spring ou Spring Boot">​</a></h3>
<p><strong>Spring</strong> est un framework très modulaire. Il est composé de plusieurs modules, qui peuvent être utilisés indépendamment les uns des autres.</p>
<p><strong>Spring Boot</strong> est un module de Spring qui permet de créer et de configurer plus facilement des applications Spring. Il contient aussi un serveur d'application embarqué et des outils pour faciliter le développement (rechargement à chaud, gestion des dépendances, etc).</p>
<p>Donc, tu peux faire du Spring sans Spring Boot, mais tu ne peux pas faire du Spring Boot sans Spring. En fait, Spring Boot est une surcouche de Spring qui te permet de te concentrer sur le développement de ton application sans te soucier de la configuration de Spring. C'est pour ça que je te conseille de commencer par Spring Boot si tu débutes avec Spring. Tu verras, c'est plus simple et plus rapide.</p>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>Le moment mnémotechnique</div><div class="admonitionContent_BuS1"><p>Spring est comme un dojo traditionnel d'arts martiaux, offrant une profondeur d'apprentissage et de pratique. En revanche, Spring Boot est comme un entraînement en plein air, axé sur la simplicité et l'efficacité pour une progression rapide.</p></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="spring-cest-quoi">Spring, c'est quoi&nbsp;?<a href="https://nathaniel-vaur-henel.github.io/blog/begin-spring#spring-cest-quoi" class="hash-link" aria-label="Lien direct vers Spring, c'est quoi&nbsp;?" title="Lien direct vers Spring, c'est quoi&nbsp;?">​</a></h3>
<p>Spring est un sac de grain de café... Attends, je t'explique...
(Roulement de tambours pour le moment culture générale.)
Si tu ne le sais pas, <strong>java</strong> est un mot anglais pour café. C'est pour ça que le logo de Java (note la majuscule) est une tasse de café fumante <em>(AAAAHHHH&nbsp;!!!)</em> et qu'en Java, on a des <strong>Beans</strong>, des haricots ou des grains de café <em>(OOOHHHH&nbsp;!!!)</em>.
Et comme Spring est un conteneur de Beans, on peut dire que c'est un sac de grain de café.</p>
<p>Garde cette image en tête, ça devrait te permettre de mieux comprendre la suite.</p>
<p>En fait, c'est même encore mieux&nbsp;:</p>
<ul>
<li>Tu décris tes Beans à Spring.</li>
<li>Il te les fabrique.</li>
<li>Il te les range sur une étagère, prêts à servir.</li>
</ul>
<p>Spring initialise tes Beans, les range dans un conteneur, et te les fournit quand tu en as besoin. Et il fait ça tout seul. Et ça, c'est le premier gros point fort de Spring et ça s'appelle l'inversion de contrôle (ou IoC pour les intimes). C'est le premier concept clés de Spring.</p>
<p>Le deuxième concept clef de Spring, c'est qu'il utilise la POO (Programmation Orientée Objet) comme un élément central. À un point qui défie l'imagination d'un débutant. Je ferai peut-être un article à ce sujet. Spring utilise la POO pour faire des trucs tout seul, comme générer des classes entières à partir d'une simple annotation.</p>
<p>En parlant annotations, c'est le cœur de Spring. Tu vas voir, c'est super pratique. Tu écris une annotation au-dessus d'une classe ou d'une méthode, et Spring fait le reste. C'est magique. Littéralement. Avec Spring, quand on me demande "comment on fait ça&nbsp;?", j'aime répondre&nbsp;:</p>
<blockquote>
<p>Il a une annotation pour ça.</p>
</blockquote>
<p>Bref, l'abstraction de Spring est tellement puissante que tu n'as pas besoin de comprendre comment ça marche pour l'utiliser. Mais c'est quand même mieux si tu comprends quand-même. C'est le troisième concept clef de Spring.</p>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>Le moment mnémotechnique</div><div class="admonitionContent_BuS1"><p>Spring, c'est un sac de grain de café, avec un robot qui te les prépare et te les sert quand tu en as besoin. Et la télécommande du robot, ce sont les annotations.</p></div></div>
<p>Spring est composé de plusieurs modules, une vingtaine, mais pour débuter, je te conseille de commencer par là&nbsp;:</p>
<ul>
<li><strong>Spring Boot</strong>&nbsp;: c'est le module qui permet de créer des applications Spring autonomes. Il contient aussi un serveur d'application embarqué (Tomcat, Jetty ou Undertow), et des outils pour faciliter le développement (rechargement à chaud, etc).</li>
<li><strong>Spring Data</strong>&nbsp;: c'est le module qui permet de manipuler des données dans des bases de données relationnelles ou NoSQL.</li>
<li><strong>Spring Web Services</strong>&nbsp;: c'est le module qui permet de développer des applications web services.</li>
<li><strong>Spring Test</strong>&nbsp;: c'est le module qui permet de faire des tests unitaires et d'intégration.</li>
</ul>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>remarque</div><div class="admonitionContent_BuS1"><p>Si tu veux te lancer dans la découverte des autres modules, je te conseille tout simplement la (sacro-sainte) <a href="https://docs.spring.io/spring-framework/docs/4.0.x/spring-framework-reference/html/overview.html" target="_blank" rel="noopener noreferrer">doc</a></p></div></div>
<div class="theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>Attention aux Chocabugs&nbsp;!</div><div class="admonitionContent_BuS1"><blockquote>
<p>Spring a un grand pouvoir et un grand pouvoir implique de grandes responsabilités.</p>
</blockquote><p>Spring, c'est de la magie. Il fait des trucs tout seul et tu ne vas pas toujours comprendre comment il fait. Et c'est à ce moment que tu dois creuser un peu afin de comprendre les mécanismes sous-jacents. Pourquoi&nbsp;? Parce que sinon, tu vas te retrouver avec des bugs incompréhensibles. Et ça, c'est pas cool. Surtout si tu rajoutes Hibernate et Lombok, et d'autres encore, qui sont aussi des frameworks qui font des trucs tout seul. À coup d'annotations. Et qui sont intégrés à Spring Boot.</p><p>Et paf, ça fait des Chocabugs©.</p></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="initializr-le-générateur-de-projet-spring">Initializr&nbsp;: le générateur de projet Spring<a href="https://nathaniel-vaur-henel.github.io/blog/begin-spring#initializr-le-g%C3%A9n%C3%A9rateur-de-projet-spring" class="hash-link" aria-label="Lien direct vers Initializr&nbsp;: le générateur de projet Spring" title="Lien direct vers Initializr&nbsp;: le générateur de projet Spring">​</a></h2>
<p><a href="https://start.spring.io/" target="_blank" rel="noopener noreferrer">Spring Initializr</a> est l'outil de référence pour utiliser Spring Boot et pour cause, c'est l'outil officiel de Spring pour créer des projets Spring Boot. C'est un site qui te permet de créer un projet Spring Boot en quelques clics.
C'est très pratique pour commencer. Tu choisis les dépendances dont tu as besoin, et il te génère un projet prêt à l'emploi.</p>
<p>Nous allons donc créer un projet Spring Boot avec Spring Initializr.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="avant-de-commencer-présentation-des-dépendances">Avant de commencer, présentation des dépendances<a href="https://nathaniel-vaur-henel.github.io/blog/begin-spring#avant-de-commencer-pr%C3%A9sentation-des-d%C3%A9pendances" class="hash-link" aria-label="Lien direct vers Avant de commencer, présentation des dépendances" title="Lien direct vers Avant de commencer, présentation des dépendances">​</a></h3>
<p>Avant de nous lancer dans le vif du sujet, je te présente quelques dépendances de bases, je les mets dans tous mes projets ou presque&nbsp;:</p>
<ul>
<li><strong>Spring Web</strong>&nbsp;: c'est la dépendance qui permet de développer des applications web.</li>
<li><strong>Spring Data JPA</strong>&nbsp;: c'est la dépendance qui permet de manipuler des données dans une base de données relationnelle.</li>
<li><strong>Spring Boot Test</strong>&nbsp;: c'est la dépendance qui permet de faire des tests unitaires et d'intégration. Tu n'as rien à faire, Spring Initializr ajoute déjà cette dépendance.</li>
<li><strong>Lombok</strong>&nbsp;: c'est la dépendance qui permet de générer du code automatiquement. C'est très pratique pour éviter de répéter du code.</li>
<li><strong>Spring Boot DevTools</strong>&nbsp;: c'est la dépendance qui permet de recharger à chaud ton application. C'est très pratique pour gagner du temps.</li>
</ul>
<p>Libre à toi d'en choisir d'autres. Tu peux même en ajouter d'autres plus tard. C'est ça qui est bien avec Spring&nbsp;: tu peux commencer petit et ajouter des choses au fur et à mesure que ton projet grandit.</p>
<p>Petit bonus&nbsp;: Si tu veux une base de données facile et rapide à mettre en place, tu peux ajouter la dépendance <strong>H2 Database</strong>. C'est une base de données relationnelle en mémoire. C'est très pratique pour le démarrage d'une appli. Et tu peux aussi la mettre en fichier pour conserver les données entre deux lancements de l'appli. Et quand tu passeras en production, tu pourras facilement changer pour une autre base de données. H2 mériterait un article à lui tout seul, mais pour l'instant, je te conseille de l'ajouter.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="créer-son-premier-projet-avec-spring-initializr-étape-par-étape">Créer son premier projet avec Spring Initializr étape par étape<a href="https://nathaniel-vaur-henel.github.io/blog/begin-spring#cr%C3%A9er-son-premier-projet-avec-spring-initializr-%C3%A9tape-par-%C3%A9tape" class="hash-link" aria-label="Lien direct vers Créer son premier projet avec Spring Initializr étape par étape" title="Lien direct vers Créer son premier projet avec Spring Initializr étape par étape">​</a></h3>
<p>C'est enfin l'heure du tuto&nbsp;!</p>
<p>C'est le moment d'aller sur <a href="https://start.spring.io/" target="_blank" rel="noopener noreferrer">Spring Initializr</a> pour créer ton projet.
Pour ce faire, tu dois d'abord remplir les champs suivants&nbsp;:</p>
<ul>
<li><strong>Project</strong>&nbsp;: c'est le type de projet. Tu peux choisir Maven ou Gradle. Moi, j'ai l'habitude de Maven, donc je choisis <code>Maven</code>.</li>
<li><strong>Language</strong>&nbsp;: c'est le langage de programmation. Tu peux choisir Java, Kotlin ou Groovy. Moi, je choisis <code>Java</code>.</li>
<li><strong>Spring Boot</strong>&nbsp;: c'est la version de Spring Boot. Tu peux choisir la dernière version stable. Moi, je choisis la version <code>3.2.2</code>.</li>
<li><strong>Project Metadata</strong>&nbsp;: ce sont les informations sur ton projet. Tu peux mettre ce que tu veux. Moi, je mets&nbsp;:<!-- -->
<ul>
<li><strong>Group</strong>&nbsp;: <code>fr.nvh</code>, c'est le nom racine de tous mes packages de toutes mes side projects.</li>
<li><strong>Artifact</strong>&nbsp;: <code>begin-spring</code>, c'est le nom de code du projet.</li>
<li><strong>Name</strong>&nbsp;: <code>Débute avec Spring</code>, c'est le nom du projet.</li>
<li><strong>Description</strong>&nbsp;: <code>Un side project pour débuter avec Spring</code>, c'est la description du projet.</li>
<li><strong>Package name</strong>&nbsp;: <code>fr.nvh.begin.spring</code>, c'est le nom du package racine du projet.</li>
<li><strong>Packaging</strong>&nbsp;: <code>jar</code>, c'est le type de package généré, tant que tu ne passes pas en production, ça n'a pas d'importance.</li>
<li><strong>Java</strong>&nbsp;: 21, c'est la version de Java, tu peux mettre la dernière version stable.</li>
</ul>
</li>
</ul>
<p>Et voilà&nbsp;:
<img decoding="async" loading="lazy" alt="spring_initializer_basics.png" src="https://nathaniel-vaur-henel.github.io/assets/images/spring_initializer_basics-8adebadc5d4e4a2d26c675fda49f4eea.png" width="1520" height="737" class="img_ev3q"></p>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_BuS1"><p>Tu pourras changer toutes ces infos plus tard dans ton fichier de configuration <code>pom.xml</code> ou <code>build.gradle</code>.</p></div></div>
<p>Voilà pour le travail de base.<br>
<!-- -->Maintenant, il faut ajouter les dépendances.<br>
<!-- -->Pour cela, tu cliques sur le bouton <strong>Add Dependencies</strong> et tu ajoutes les dépendances dont je t'ai parlé plus haut. Tu peux aussi ajouter d'autres dépendances si tu veux.</p>
<p>Pour rappel&nbsp;:</p>
<ul>
<li><strong>Spring Web</strong>&nbsp;: c'est la dépendance qui permet de développer des applications web.</li>
<li><strong>Spring Data JPA</strong>&nbsp;: c'est la dépendance qui permet de manipuler des données dans une base de données relationnelle.</li>
<li><strong>Spring Boot Test</strong>&nbsp;: c'est la dépendance qui permet de faire des tests unitaires et d'intégration.</li>
<li><strong>Lombok</strong>&nbsp;: c'est la dépendance qui permet de générer du code automatiquement. C'est très pratique pour éviter de répéter du code.</li>
<li><strong>Spring Boot DevTools</strong>&nbsp;: c'est la dépendance qui permet de recharger à chaud ton application. C'est très pratique pour gagner du temps.</li>
<li><strong>H2 Database</strong>&nbsp;: c'est la dépendance qui permet d'ajouter une base de données relationnelle en mémoire.</li>
</ul>
<p><img decoding="async" loading="lazy" alt="spring_initializer_dependencies.png" src="https://nathaniel-vaur-henel.github.io/assets/images/spring_initializer_dependencies-d87e33d300a9729c99a1856657cf677a.png" width="1521" height="735" class="img_ev3q"></p>
<p>Clic sur le bouton <strong>Generate</strong> et tu auras un fichier zip avec ton projet Spring Boot. Décompresse-le et ouvre-le dans ton IDE préféré.</p>
<p>Faisons-le&nbsp;!</p>
<p>Comme je suis sympa, je te mets le lien vers le projet que j'ai créé&nbsp;: <a href="https://start.spring.io/#!type=maven-project&amp;language=java&amp;platformVersion=3.2.2&amp;packaging=jar&amp;jvmVersion=21&amp;groupId=fr.nvh&amp;artifactId=begin-spring&amp;name=D%C3%A9bute%20avec%20Spring&amp;description=Cr%C3%A9e%20un%20projet%20facilement&amp;packageName=fr.nvh.begin.spring&amp;dependencies=devtools,lombok,web,data-jpa,h2" target="_blank" rel="noopener noreferrer">Spring Initializr - begin-spring</a></p>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_BuS1"><p>Le bouton <strong>Explore</strong> te permet de voir le projet que tu as créé avant de la télécharger.</p></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="lancement-de-lapplication-du-projet-généré">Lancement de l'application du projet généré<a href="https://nathaniel-vaur-henel.github.io/blog/begin-spring#lancement-de-lapplication-du-projet-g%C3%A9n%C3%A9r%C3%A9" class="hash-link" aria-label="Lien direct vers Lancement de l'application du projet généré" title="Lien direct vers Lancement de l'application du projet généré">​</a></h3>
<p>Ouvre ton projet dans ton IDE préféré.</p>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_BuS1"><p>Moi, j'utilise <a href="https://www.jetbrains.com/fr-fr/idea/" target="_blank" rel="noopener noreferrer">IntelliJ IDEA</a>, mais tu peux utiliser celui que tu veux. La version Community d'IntelliJ IDEA est gratuite et suffisante pour commencer. Je pourrais écrire des tonnes d'articles sur IntelliJ IDEA, et je le ferai prochainement, mais pour l'instant, revenons à Spring.</p></div></div>
<p>Alors à quoi ça ressemble&nbsp;?</p>
<ul>
<li>Un fichier de configuration <code>pom.xml</code> (ou <code>build.gradle</code>).</li>
<li>Un fichier <code>DebuteAvecSpringApplication.java</code> dans le package <code>fr.nvh.begin.spring</code>. C'est la classe de démarrage de ton application.</li>
<li>Un fichier <code>application.properties</code> dans le dossier <code>src/main/resources</code>. C'est le fichier de configuration de ton application.</li>
<li>Un fichier <code>DebuteAvecSpringApplication.java</code> dans le package <code>fr.nvh.begin.spring</code>. C'est le fichier de test de ton application.</li>
<li>Un fichier <code>HELP.md</code> qui contient des informations et des guides sur Spring.</li>
</ul>
<p>Ignore le reste pour l'instant.</p>
<p>Bon, commençons par le commencement. Le fichier <code>pom.xml</code> (ou <code>build.gradle</code>). Va jeter un œil, tu y verras toutes les dépendances que tu as ajoutées. Tu pourras aussi y ajouter d'autres dépendances plus tard.</p>
<p>Et tu peux déjà lancer ton application&nbsp;! Tu verras, ça ne fait pas grand-chose pour l'instant. Mais c'est déjà un bon début.</p>
<p>Regardons un peu ces logs. Tu verras, c'est très verbeux. Mais c'est normal. C'est Spring qui te dit tout ce qu'il fait. Et c'est très pratique pour comprendre ce qui se passe. Intéressons-nous à quelque lignes en particulier&nbsp;:</p>
<ul>
<li>Un petit d'ASCII art qui te dit que c'est Spring Boot qui démarre.<!-- -->
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  .   ____          _            __ _ _</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> \\/  ___)| |_)| | | | | || (_| |  ) ) ) )</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  '  |____| .__|_| |_|_| |_\__, | / / / /</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> =========|_|==============|___/=/_/_/_/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> :: Spring Boot ::                (v3.2.2)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copier le code" title="Copier" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>Si tu as mis <strong>Spring Boot Devtools</strong>, tu verras une ligne qui te dit que le rechargement à chaud est activé&nbsp;: <code>LiveReload server is running on port 35729</code></li>
<li>Tu verras aussi deux lignes qui te disent que la base de données est démarrée.<!-- -->
<ul>
<li><code>HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:006fa2a9-f721-437e-ad84-dfc02dc70c38 user=SA</code> pour la connection à la base de données.</li>
<li><code>H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:3e3e3e3e-3e3e-3e3e-3e3e-3e3e3e3e3e3e'</code> pour t'annoncer que tu peux accéder à la base de données à l'adresse <a href="http://localhost:8080/h2-console" target="_blank" rel="noopener noreferrer">http://localhost:8080/h2-console</a>. Moi, j'adore.</li>
</ul>
</li>
<li>Tu verras aussi une ligne qui te dit que le serveur d'application est démarré.
<code>Tomcat started on port(s): 8080 (http) with context path ''</code></li>
<li>Et tu verras une ligne qui te dit que l'application est démarrée.
<code>Started DebuteAvecSpringApplication in 1.5 seconds (JVM running for 2.1)</code></li>
<li>Tu verras aussi des lignes qui te disent qu'Hibernate est lancé.</li>
</ul>
<p>Du coup, va voir ta base de données&nbsp;! Tu peux y accéder à l'adresse <a href="http://localhost:8080/h2-console" target="_blank" rel="noopener noreferrer">http://localhost:8080/h2-console</a>, remplis le champ <code>JDBC URL:</code> avec l'url que tu trouves dans les logs, ici <code>jdbc:h2:mem:006fa2a9-f721-437e-ad84-dfc02dc70c38</code>. Tu verras que tu as une base de données H2 qui est démarrée. Bon, elle est vide, mais c'est déjà un bon début.</p>
<p>Et tu peux aussi accéder à ton application à l'adresse <a href="http://localhost:8080/" target="_blank" rel="noopener noreferrer">http://localhost:8080</a>. Tu verras une belle page d'erreur. C'est normal, tu n'as pas encore de page à afficher.</p>
<p>Et voilà, tu as déjà une application Spring qui tourne. Tu peux déjà commencer à coder. On y va&nbsp;?</p>
<p>Ok, mais pas maintenant, je vais m'arrêter là pour aujourd'hui. Je te laisse digérer tout ça. Et je te donne rendez-vous dans le prochain article pour commencer à coder et à configurer ton application.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="pour-aller-plus-loin">Pour aller plus loin<a href="https://nathaniel-vaur-henel.github.io/blog/begin-spring#pour-aller-plus-loin" class="hash-link" aria-label="Lien direct vers Pour aller plus loin" title="Lien direct vers Pour aller plus loin">​</a></h2>
<p>Voici quelques liens pour approfondir les sujets abordés dans cet article en attendant le prochain article&nbsp;!</p>
<ul>
<li>Wikipedia&nbsp;:<!-- -->
<ul>
<li><a href="https://fr.wikipedia.org/wiki/Java_(langage)" target="_blank" rel="noopener noreferrer">Java</a></li>
<li><a href="https://fr.wikipedia.org/wiki/Kotlin_(langage)" target="_blank" rel="noopener noreferrer">Kotlin</a></li>
<li><a href="https://fr.wikipedia.org/wiki/Groovy_(langage)" target="_blank" rel="noopener noreferrer">Groovy</a></li>
<li><a href="https://fr.wikipedia.org/wiki/Apache_Maven" target="_blank" rel="noopener noreferrer">Maven</a></li>
<li><a href="https://fr.wikipedia.org/wiki/Gradle" target="_blank" rel="noopener noreferrer">Gradle</a></li>
<li><a href="https://fr.wikipedia.org/wiki/Spring_Framework" target="_blank" rel="noopener noreferrer">Spring</a></li>
<li><a href="https://fr.wikipedia.org/wiki/H2_(base_de_donn%C3%A9es)" target="_blank" rel="noopener noreferrer">H2 Database</a></li>
</ul>
</li>
<li>Spring&nbsp;:<!-- -->
<ul>
<li><a href="https://spring.io/" target="_blank" rel="noopener noreferrer">Spring</a></li>
<li><a href="https://start.spring.io/" target="_blank" rel="noopener noreferrer">Spring Initializr</a></li>
<li><a href="https://spring.io/projects/spring-boot" target="_blank" rel="noopener noreferrer">Spring Boot</a></li>
<li><a href="https://spring.io/projects/spring-data-jpa" target="_blank" rel="noopener noreferrer">Spring Data JPA</a></li>
<li><a href="https://spring.io/guides/gs/producing-web-service/" target="_blank" rel="noopener noreferrer">Spring Web Services</a></li>
<li><a href="https://spring.io/guides/gs/testing-web/" target="_blank" rel="noopener noreferrer">Spring Boot Test</a></li>
<li><a href="https://docs.spring.io/spring-boot/docs/current/reference/html/using-spring-boot.html#using-boot-devtools" target="_blank" rel="noopener noreferrer">Spring Boot DevTools</a></li>
<li><a href="https://spring.io/projects/spring-security" target="_blank" rel="noopener noreferrer">Spring Security</a></li>
</ul>
</li>
<li>Les sites officiels&nbsp;:<!-- -->
<ul>
<li><a href="https://www.h2database.com/html/main.html" target="_blank" rel="noopener noreferrer">H2 Database</a></li>
<li><a href="https://projectlombok.org/" target="_blank" rel="noopener noreferrer">Lombok</a></li>
<li><a href="https://hibernate.org/" target="_blank" rel="noopener noreferrer">Hibernate</a></li>
<li><a href="https://gradle.org/" target="_blank" rel="noopener noreferrer">Gradle</a></li>
<li><a href="https://maven.apache.org/" target="_blank" rel="noopener noreferrer">Maven</a></li>
<li><a href="https://www.java.com/fr/" target="_blank" rel="noopener noreferrer">Java</a></li>
<li><a href="https://kotlinlang.org/" target="_blank" rel="noopener noreferrer">Kotlin</a></li>
<li><a href="https://groovy-lang.org/" target="_blank" rel="noopener noreferrer">Groovy</a></li>
<li><a href="https://openclassrooms.com/fr" target="_blank" rel="noopener noreferrer">Cours en ligne OpenClassrooms</a></li>
<li><a href="https://www.jetbrains.com/fr-fr/idea/" target="_blank" rel="noopener noreferrer">IntelliJ IDEA</a></li>
</ul>
</li>
<li>Baeldung&nbsp;:<!-- -->
<ul>
<li><a href="https://www.baeldung.com/spring-tutorial" target="_blank" rel="noopener noreferrer">Spring</a></li>
<li><a href="https://www.baeldung.com/spring-boot" target="_blank" rel="noopener noreferrer">Spring Boot</a></li>
<li><a href="https://www.baeldung.com/spring-vs-spring-boot" target="_blank" rel="noopener noreferrer">A Comparison Between Spring and Spring Boot</a></li>
<li><a href="https://www.baeldung.com/the-persistence-layer-with-spring-data-jpa" target="_blank" rel="noopener noreferrer">Spring Data JPA</a></li>
<li><a href="https://www.baeldung.com/spring-webserviceservertest" target="_blank" rel="noopener noreferrer">Spring Web Services</a></li>
<li><a href="https://www.baeldung.com/spring-boot-testing" target="_blank" rel="noopener noreferrer">Spring Boot Test</a></li>
<li><a href="https://www.baeldung.com/spring-boot-devtools" target="_blank" rel="noopener noreferrer">Spring Boot DevTools</a></li>
</ul>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="conclusion">Conclusion<a href="https://nathaniel-vaur-henel.github.io/blog/begin-spring#conclusion" class="hash-link" aria-label="Lien direct vers Conclusion" title="Lien direct vers Conclusion">​</a></h2>
<p>Je t'ai expliqué ce qu'est Spring et pourquoi c'est un framework incontournable pour un développeur Java.</p>
<p>Je t'ai expliqué comment créer une application Spring en quelques minutes grâce à <a href="https://start.spring.io/" target="_blank" rel="noopener noreferrer">Spring Initializr</a> et je t'ai même donné des dépendances pour commencer.</p>
<p>J'espère que tu as appris des choses. Et j'espère que tu as envie d'en apprendre encore plus. Parce que c'est pas fini. Et je te donne rendez-vous dans le <a href="https://nathaniel-vaur-henel.github.io/blog/continue-spring">prochain article</a> pour commencer à coder et à configurer ton application.</p>
<p>Si tu as envie que j'explique plus en avant certains concepts ou que je parle de quelque chose en particulier, n'hésite pas à me le dire dans les commentaires.</p>
<p>Pour ne pas rater les prochains articles, abonne-toi à un flux (tu as le choix entre <a href="https://nathaniel-vaur-henel.github.io/blog/rss.xml" target="_blank" rel="noopener noreferrer">RSS</a>, <a href="https://nathaniel-vaur-henel.github.io/blog/atom.xml" target="_blank" rel="noopener noreferrer">Atom</a> et <a href="https://nathaniel-vaur-henel.github.io/blog/feeed.json" target="_blank" rel="noopener noreferrer">Json</a>) ou à la newsletter en <a href="https://nathaniel-vaur-henel.github.io/">page d'accueil</a>&nbsp;!</p>
<p>Et bon entrainement&nbsp;!</p>]]></content:encoded>
            <category>Java</category>
            <category>Spring</category>
            <category>langage</category>
            <category>développement</category>
            <category>tuto</category>
        </item>
    </channel>
</rss>