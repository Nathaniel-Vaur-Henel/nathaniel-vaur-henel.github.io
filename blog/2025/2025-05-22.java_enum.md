---
slug: /java-enum
title: 'Les enum en Java : bien plus que des constantes'
description: 'Les enums, les objets à la puissance insoupçonnée !'
authors: nvh
tags: [ Java, langage, développement, tuto ]
enableComments: true # pour giscus
---

# Les enum en Java : bien plus que des constantes

Il fut un temps où je pensais que les `enum` en Java, c'était juste des constantes en majuscules posées là pour faire joli dans le code. Et puis un jour, j'ai découvert leur vrai pouvoir. Et là, j'ai compris que j'étais passé à côté d'un super outil.

Dans cet article, on va explorer ensemble ce que sont vraiment les enums en Java, comment les utiliser efficacement, et surtout comment éviter de tomber dans les pièges classiques. Prépare ton clavier, on va Springer© !

---

## Qu’est-ce qu’une `enum` ?

Une `enum` (abréviation de "enumeration") est un type de données qui permet de définir un ensemble **fixe** et **nommé** de constantes. C’est bien plus qu’une simple liste de valeurs figées : une enum est une **classe spéciale** en Java.

```java
public enum CoffeeSize {
    SMALL, MEDIUM, LARGE
}
```

Tu viens de créer un type `CoffeeSize`, avec trois valeurs possibles. Si tu essaies d’en utiliser une qui n’existe pas, ton code ne compile même pas. Et ça, c’est le pouvoir du **type-safe**.

Mais attends, ce n’est que le début.

:::tip L’astuce de ton Dev Sensei
Je préfère écrire mes enums en `UPPER_SNAKE_CASE` pour les distinguer des classes puisque ce sont des constantes.  
De plus, je préfère en écrire une par ligne pour la lisibilité.
:::

### Une enum est un objet

Contrairement aux idées reçues, une enum n’est pas juste une constante symbolique. C’est un **objet Java**. Elle peut :

* Avoir des attributs
* Avoir des méthodes
* Implémenter des interfaces
* Avoir un comportement propre à chaque constante

### Implémenter une interface avec une enum

```java
public interface Printable {
    void print();
}

public enum DocumentType implements Printable {
    PDF {
        public void print() {
            System.out.println("Impression PDF");
        }
    },
    WORD {
        public void print() {
            System.out.println("Impression Word");
        }
    },
    TEXT {
        public void print() {
            System.out.println("Impression Text");
        }
    };
}
```

Chaque constante peut fournir sa propre implémentation de l’interface. C’est du polymorphisme, version enum.

### La classe `Enum`

Toutes les enums héritent implicitement de la classe abstraite `java.lang.Enum<E>`. Tu ne peux pas hériter d’une autre classe. Cette classe fournit des méthodes comme :

* `name()` : le nom de la constante
* `ordinal()` : sa position (⚠️ à éviter pour stocker en base)
* `compareTo()` : comparer deux enums
* `values()` : obtenir toutes les valeurs de l’enum sous forme de tableau.

:::warning
Attention aux Chocabugs© Ne jamais persister un `ordinal()` dans une base. Change l’ordre de tes enums et c’est la catastrophe assurée.
:::

## Ajouter des données à une enum

Tu peux associer des valeurs à tes constantes grâce à des attributs et constructeurs privés.

```java
public enum Color {
    RED("#FF0000"),
    GREEN("#00FF00"), 
    BLUE("#0000FF");

    private final String hex;

    Color(String hex) {
        this.hex = hex;
    }

    public String getHex() {
        return hex;
    }
}
```

## Les méthodes utiles d’une enum

* `values()` : tableau de toutes les valeurs de l'enum
* `valueOf(String)` : transforme une chaîne en enum
* `name()` et `toString()` : identifiants lisibles
* `ordinal()` : index, à ne **jamais** utiliser pour persister


## Enum avec comportement : méthode `abstract`

Tu peux définir une méthode `abstract` dans une enum, et l’implémenter différemment pour chaque constante.

```java
public enum Operation {
    ADD { public int apply(int x, int y) { return x + y; } },
    SUB { public int apply(int x, int y) { return x - y; } },
    MUL { public int apply(int x, int y) { return x * y; } },
    DIV {
        public int apply(int x, int y) {
            if (y == 0) throw new ArithmeticException("Division par zéro");
            return x / y;
        }
    };

    public abstract int apply(int x, int y);
}
```

\:::tip L’astuce de ton Dev Sensei Chaque constante devient une **classe anonyme** avec sa propre implémentation. Du vrai polymorphisme. :::

### Un grand pouvoir implique de grandes responsabilités

C’est génial, oui. Mais attention :

---

## EnumSet et EnumMap : les collections optimisées

* `EnumSet` : bien plus performant qu’un `HashSet` pour des enums
* `EnumMap` : map optimisée pour les enums comme clés

```java
EnumSet<DayOfWeek> weekEnd = EnumSet.of(DayOfWeek.SATURDAY, DayOfWeek.SUNDAY);
```

---

## Enum et base de données

### Avec JPA

```java
@Enumerated(EnumType.STRING)
private Status status;
```

### Avec Jackson (JSON)

Tu peux personnaliser la sérialisation :

```java
@JsonValue
public String getLabel() {
    return label;
}
```

Et la désérialisation :

```java
@JsonCreator
public static MyEnum fromLabel(String label) { ... }
```

---

## DTO vs Entity : attention aux enums exposés

* Ton modèle métier peut utiliser une enum interne
* Ton DTO (exposé en API) peut en utiliser une autre
* Un `mapper` enum → enum peut s’imposer

---

## Exemple complet

```java
public enum TicketStatus {
    OPEN("Ouvert"), IN_PROGRESS("En cours"), CLOSED("Fermé");

    private final String label;

    TicketStatus(String label) {
        this.label = label;
    }

    public String getLabel() {
        return label;
    }

    public static Optional<TicketStatus> fromLabel(String label) {
        return Arrays.stream(values())
                     .filter(s -> s.label.equalsIgnoreCase(label))
                     .findFirst();
    }
}
```

---

## Anecdote Dev Sensei

> Un jour, un collègue a réordonné une enum stockée en base avec `ORDINAL`. Résultat : tous les utilisateurs sont passés de `USER` à `ADMIN`. En prod. True story. R.I.P. sécurité.

---

## Conclusion

Les enums sont sous-estimées. Et pourtant, elles peuvent grandement clarifier ton code, structurer ton métier, et t’éviter de nombreuses erreurs.

Alors n’attends plus pour les utiliser correctement, et surtout… **évite les Chocabugs© !**

Prêt à énumérer tes idées dans ton prochain projet Java ?
